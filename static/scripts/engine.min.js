/* RedDragon's CMS - http://helpcast.ru/cms */

(function(w){if(w.fastXDM)return;var handlers={};var onEnvLoad=[];var env={};function genKey(){var key='';for(i=0;i<5;i++)key+=Math.ceil(Math.random()*15).toString(16);return key;}
function waitFor(obj,prop,func,self,count){if(obj[prop]){func.apply(self);}else{count=count||0;if(count<1000)setTimeout(function(){waitFor(obj,prop,func,self,count+1)},0);}}
function attachScript(url){setTimeout(function(){var newScript=document.createElement('script');newScript.type='text/javascript';newScript.src=url||w.fastXDM.helperUrl;waitFor(document,'body',function(){document.getElementsByTagName('HEAD')[0].appendChild(newScript);});},0);}
function getEnv(callback,self){if(env.loaded){callback.apply(self,[env]);}else{onEnvLoad.push([self,callback]);}}
function envLoaded(){env.loaded=true;var i=onEnvLoad.length;while(i--){onEnvLoad[i][1].apply(onEnvLoad[i][0],[env]);}}
function applyMethod(strData,self){getEnv(function(env){var data=env.json.parse(strData);if(data[0]){if(!data[1])data[1]=[];var i=data[1].length;while(i--){if(data[1][i]._func){var funcNum=data[1][i]._func;data[1][i]=function(){var args=Array.prototype.slice.call(arguments);args.unshift('_func'+funcNum);self.callMethod.apply(self,args);}}}
setTimeout(function(){if(!self.methods[data[0]])throw Error('fastXDM: Method '+data[0]+' is undefined');self.methods[data[0]].apply(self,data[1]);},0);}});}
w.fastXDM={_id:0,helperUrl:((location.protocol==='https:')?'https:':'http:')+'//vk.com/js/api/xdmHelper.js',Server:function(methods,filter){this.methods=methods||{};this.id=w.fastXDM._id++;this.filter=filter;this.key=genKey();this.methods['%init%']=this.methods.__fxdm_i=function(){w.fastXDM.run(this.id);if(this.methods.onInit)this.methods.onInit();};this.frameName='fXD'+this.key;this.server=true;handlers[this.key]=[applyMethod,this];},Client:function(methods){this.methods=methods||{};this.id=w.fastXDM._id++;w.fastXDM.run(this.id);if(window.name.indexOf('fXD')===0){this.key=window.name.substr(3);}else{throw Error('Wrong window.name property.');}
this.caller=window.parent;handlers[this.key]=[applyMethod,this];this.client=true;w.fastXDM.on('helper',function(){w.fastXDM.onClientStart(this);},this);getEnv(function(env){env.send(this,env.json.stringify(['%init%']));var methods=this.methods;setTimeout(function(){if(methods.onInit)methods.onInit();},0);},this);},onMessage:function(e){if(!e.data)return false;var key=e.data.substr(0,5);if(handlers[key]){var self=handlers[key][1];if(self&&(!self.filter||self.filter(e.origin))){handlers[key][0](e.data.substr(6),self);}}},setJSON:function(json){env.json=json;},getJSON:function(callback){if(!callback)return env.json;getEnv(function(env){callback(env.json);});},setEnv:function(exEnv){var i;for(i in exEnv){env[i]=exEnv[i];}
envLoaded();},_q:{},on:function(key,act,self){if(!this._q[key])this._q[key]=[];if(this._q[key]==-1){act.apply(self);}else{this._q[key].push([act,self]);}},run:function(key){var len=(this._q[key]||[]).length;if(this._q[key]&&len>0){for(var i=0;i<len;i++)this._q[key][i][0].apply(this._q[key][i][1]);}
this._q[key]=-1;},waitFor:waitFor}
w.fastXDM.Server.prototype.start=function(obj,count){if(obj.contentWindow){this.caller=obj.contentWindow;this.frame=obj;w.fastXDM.on('helper',function(){w.fastXDM.onServerStart(this);},this);}else{var self=this;count=count||0;if(count<50)setTimeout(function(){self.start.apply(self,[obj,count+1]);},100);}}
function extend(obj1,obj2){for(var i in obj2){if(obj1[i]&&typeof(obj1[i])=='object'){extend(obj1[i],obj2[i])}else{obj1[i]=obj2[i];}}}
w.fastXDM.Server.prototype.append=function(obj,options){var div=document.createElement('DIV');div.innerHTML='<iframe name="'+this.frameName+'" ></iframe>';var frame=div.firstChild;var self=this;setTimeout(function(){frame.frameBorder='0';if(options)extend(frame,options);obj.insertBefore(frame,obj.firstChild);self.start(frame);},0);return frame;}
w.fastXDM.Client.prototype.callMethod=w.fastXDM.Server.prototype.callMethod=function(){var args=Array.prototype.slice.call(arguments);var method=args.shift();var i=args.length;while(i--){if(typeof(args[i])=='function'){this.funcsCount=(this.funcsCount||0)+1;var func=args[i];var funcName='_func'+this.funcsCount;this.methods[funcName]=function(){func.apply(this,arguments);delete this.methods[funcName];}
args[i]={_func:this.funcsCount};}}
waitFor(this,'caller',function(){w.fastXDM.on(this.id,function(){getEnv(function(env){env.send(this,env.json.stringify([method,args]));},this);},this);},this);}
if(w.JSON&&typeof(w.JSON)=='object'&&w.JSON.parse&&w.JSON.stringify&&w.JSON.stringify({a:[1,2,3]}).replace(/ /g,'')=='{"a":[1,2,3]}'){env.json={parse:w.JSON.parse,stringify:w.JSON.stringify};}else{w.fastXDM._needJSON=true;}
if(w.postMessage){env.protocol='p';env.send=function(xdm,strData){xdm.caller.postMessage(xdm.key+':'+strData,"*");}
if(w.addEventListener){w.addEventListener("message",w.fastXDM.onMessage,false);}else{w.attachEvent("onmessage",w.fastXDM.onMessage);}
if(w.fastXDM._needJSON){w.fastXDM._onlyJSON=true;attachScript();}else{envLoaded();}}else{attachScript();}})(window);if(!window.VK)window.VK={};if(!VK.MD5){VK.MD5=function(n){var j=function(o,r){var q=(o&65535)+(r&65535),p=(o>>16)+(r>>16)+(q>>16);return(p<<16)|(q&65535)},g=function(o,p){return(o<<p)|(o>>>(32-p))},k=function(w,r,p,o,v,u){return j(g(j(j(r,w),j(o,u)),v),p)},a=function(q,p,w,v,o,u,r){return k((p&w)|((~p)&v),q,p,o,u,r)},h=function(q,p,w,v,o,u,r){return k((p&v)|(w&(~v)),q,p,o,u,r)},c=function(q,p,w,v,o,u,r){return k(p^w^v,q,p,o,u,r)},m=function(q,p,w,v,o,u,r){return k(w^(p|(~v)),q,p,o,u,r)},b=function(A,u){var z=1732584193,y=-271733879,w=-1732584194,v=271733878,r,q,p,o;A[u>>5]|=128<<((u)%32);A[(((u+64)>>>9)<<4)+14]=u;for(var t=0,s=A.length;t<s;t+=16){r=z;q=y;p=w;o=v;z=a(z,y,w,v,A[t+0],7,-680876936);v=a(v,z,y,w,A[t+1],12,-389564586);w=a(w,v,z,y,A[t+2],17,606105819);y=a(y,w,v,z,A[t+3],22,-1044525330);z=a(z,y,w,v,A[t+4],7,-176418897);v=a(v,z,y,w,A[t+5],12,1200080426);w=a(w,v,z,y,A[t+6],17,-1473231341);y=a(y,w,v,z,A[t+7],22,-45705983);z=a(z,y,w,v,A[t+8],7,1770035416);v=a(v,z,y,w,A[t+9],12,-1958414417);w=a(w,v,z,y,A[t+10],17,-42063);y=a(y,w,v,z,A[t+11],22,-1990404162);z=a(z,y,w,v,A[t+12],7,1804603682);v=a(v,z,y,w,A[t+13],12,-40341101);w=a(w,v,z,y,A[t+14],17,-1502002290);y=a(y,w,v,z,A[t+15],22,1236535329);z=h(z,y,w,v,A[t+1],5,-165796510);v=h(v,z,y,w,A[t+6],9,-1069501632);w=h(w,v,z,y,A[t+11],14,643717713);y=h(y,w,v,z,A[t+0],20,-373897302);z=h(z,y,w,v,A[t+5],5,-701558691);v=h(v,z,y,w,A[t+10],9,38016083);w=h(w,v,z,y,A[t+15],14,-660478335);y=h(y,w,v,z,A[t+4],20,-405537848);z=h(z,y,w,v,A[t+9],5,568446438);v=h(v,z,y,w,A[t+14],9,-1019803690);w=h(w,v,z,y,A[t+3],14,-187363961);y=h(y,w,v,z,A[t+8],20,1163531501);z=h(z,y,w,v,A[t+13],5,-1444681467);v=h(v,z,y,w,A[t+2],9,-51403784);w=h(w,v,z,y,A[t+7],14,1735328473);y=h(y,w,v,z,A[t+12],20,-1926607734);z=c(z,y,w,v,A[t+5],4,-378558);v=c(v,z,y,w,A[t+8],11,-2022574463);w=c(w,v,z,y,A[t+11],16,1839030562);y=c(y,w,v,z,A[t+14],23,-35309556);z=c(z,y,w,v,A[t+1],4,-1530992060);v=c(v,z,y,w,A[t+4],11,1272893353);w=c(w,v,z,y,A[t+7],16,-155497632);y=c(y,w,v,z,A[t+10],23,-1094730640);z=c(z,y,w,v,A[t+13],4,681279174);v=c(v,z,y,w,A[t+0],11,-358537222);w=c(w,v,z,y,A[t+3],16,-722521979);y=c(y,w,v,z,A[t+6],23,76029189);z=c(z,y,w,v,A[t+9],4,-640364487);v=c(v,z,y,w,A[t+12],11,-421815835);w=c(w,v,z,y,A[t+15],16,530742520);y=c(y,w,v,z,A[t+2],23,-995338651);z=m(z,y,w,v,A[t+0],6,-198630844);v=m(v,z,y,w,A[t+7],10,1126891415);w=m(w,v,z,y,A[t+14],15,-1416354905);y=m(y,w,v,z,A[t+5],21,-57434055);z=m(z,y,w,v,A[t+12],6,1700485571);v=m(v,z,y,w,A[t+3],10,-1894986606);w=m(w,v,z,y,A[t+10],15,-1051523);y=m(y,w,v,z,A[t+1],21,-2054922799);z=m(z,y,w,v,A[t+8],6,1873313359);v=m(v,z,y,w,A[t+15],10,-30611744);w=m(w,v,z,y,A[t+6],15,-1560198380);y=m(y,w,v,z,A[t+13],21,1309151649);z=m(z,y,w,v,A[t+4],6,-145523070);v=m(v,z,y,w,A[t+11],10,-1120210379);w=m(w,v,z,y,A[t+2],15,718787259);y=m(y,w,v,z,A[t+9],21,-343485551);z=j(z,r);y=j(y,q);w=j(w,p);v=j(v,o)}return[z,y,w,v]},f=function(r){var q="",s=-1,p=r.length,o,t;while(++s<p){o=r.charCodeAt(s);t=s+1<p?r.charCodeAt(s+1):0;if(55296<=o&&o<=56319&&56320<=t&&t<=57343){o=65536+((o&1023)<<10)+(t&1023);s++}if(o<=127){q+=String.fromCharCode(o)}else{if(o<=2047){q+=String.fromCharCode(192|((o>>>6)&31),128|(o&63))}else{if(o<=65535){q+=String.fromCharCode(224|((o>>>12)&15),128|((o>>>6)&63),128|(o&63))}else{if(o<=2097151){q+=String.fromCharCode(240|((o>>>18)&7),128|((o>>>12)&63),128|((o>>>6)&63),128|(o&63))}}}}}return q},e=function(p){var o=Array(p.length>>2),r,q;for(r=0,q=o.length;r<q;r++){o[r]=0}for(r=0,q=p.length*8;r<q;r+=8){o[r>>5]|=(p.charCodeAt(r/8)&255)<<(r%32)}return o},l=function(p){var o="";for(var r=0,q=p.length*32;r<q;r+=8){o+=String.fromCharCode((p[r>>5]>>>(r%32))&255)}return o},d=function(o){return l(b(e(o),o.length*8))},i=function(q){var t="0123456789abcdef",p="",o;for(var s=0,r=q.length;s<r;s++){o=q.charCodeAt(s);p+=t.charAt((o>>>4)&15)+t.charAt(o&15)}return p};return i(d(f(n)))}}
VK.extend=function(target,source,overwrite){for(var key in source){if(overwrite||typeof target[key]==='undefined'){target[key]=source[key];}}
return target;};if(VK._protocol!=='https:'){VK._protocol=((location.protocol==='https:')?'https:':'http:');}
if(!VK.xdConnectionCallbacks){VK.extend(VK,{_apiId:null,_session:null,_userStatus:'unknown',_domain:{main:'https://oauth.vk.com/',api:'https://api.vk.com/'},_path:{login:'authorize',proxy:'fxdm_oauth_proxy.html'},_rootId:'vk_api_transport',_nameTransportPath:'',xdReady:false,access:{FRIENDS:0x2,PHOTOS:0x4,AUDIO:0x8,VIDEO:0x10,MATCHES:0x20,QUESTIONS:0x40,WIKI:0x80}});VK.init=function(options){var body,root;VK._apiId=null;if(!options.apiId){throw'VK.init() called without an apiId'}
VK._apiId=options.apiId;if(options.onlyWidgets)return true;if(options.nameTransportPath&&options.nameTransportPath!==''){VK._nameTransportPath=options.nameTransportPath;}
root=document.getElementById(VK._rootId);if(!root){root=document.createElement('div');root.id=VK._rootId;body=document.getElementsByTagName('body')[0];body.insertBefore(root,body.childNodes[0]);}
root.style.position='absolute';root.style.top='-10000px';var session=VK.Cookie.load();if(session){VK.Auth._loadState='loaded';VK.Auth.setSession(session,session?'connected':'unknown');}};if(!VK.Cookie){VK.Cookie={_domain:null,load:function(){var
cookie=document.cookie.match('\\bvk_app_'+VK._apiId+'=([^;]*)\\b'),session;if(cookie){session=this.decode(cookie[1]);if(session.secret!='oauth'){return false;}
session.expire=parseInt(session.expire,10);VK.Cookie._domain='.'+window.location.hostname;}
return session;},setRaw:function(val,ts,domain,time){var rawCookie;rawCookie='vk_app_'+VK._apiId+'='+val+'';var exp=time?(new Date().getTime()+time*1000):ts*1000;rawCookie+=(val&&ts===0?'':'; expires='+new Date(exp).toGMTString());rawCookie+='; path=/';rawCookie+=(domain?'; domain=.'+domain:'');document.cookie=rawCookie;this._domain=domain;},set:function(session,resp){if(session){this.setRaw(this.encode(session),session.expire,window.location.hostname,(resp||{}).time);}else{this.clear();}},clear:function(){this.setRaw('',0,this._domain,0);},encode:function(params){var
pairs=[],key;for(key in params){if(key!='user')pairs.push(encodeURIComponent(key)+'='+encodeURIComponent(params[key]));}
pairs.sort();return pairs.join('&');},decode:function(str){var
params={},parts=str.split('&'),i,pair;for(i=0;i<parts.length;i++){pair=parts[i].split('=',2);if(pair&&pair[0]){params[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1]);}}
return params;}};}
if(!VK.Api){VK.Api={_headId:null,_callbacks:{},ie6_7:function(){if(!VK.Api.ieTested){VK.Api.isIE6_7=navigator.userAgent.match(/MSIE [6|7]/i);VK.Api.ieTested=true;}
return VK.Api.isIE6_7;},attachScript:function(url){if(!VK.Api._headId)VK.Api._headId=document.getElementsByTagName("head")[0];var newScript=document.createElement('script');newScript.type='text/javascript';newScript.setAttribute('encoding','UTF-8');newScript.src=url;VK.Api._headId.appendChild(newScript);},checkMethod:function(method,params,cb,queryTry){var m=method.toLowerCase();if(m=='wall.post'||m=='activity.set'){var text=(m=='activity.set')?params.text:params.message;var query=VK._protocol+'//vk.com/al_apps.php?act=wall_post_box&widget=1&method='+m+'&aid='+parseInt(VK._apiId,10)+'&text='+encodeURIComponent(text);if(m=='wall.post'){query+='&owner_id='+parseInt(params.owner_id||0,10)+'&attachments='+(params.attachments||params.attachment||'');}
var method_access='_'+(Math.random()).toString(16).substr(2);query+='&method_access='+method_access;var popup=VK.UI.popup({url:query,width:460,height:220});var timer=setInterval(function(){if(VK.UI.active.closed){clearInterval(timer);params.method_access=method_access;VK.Api.call(method,params,cb,queryTry);}},500);return false;}
return true;},call:function(method,params,cb,queryTry){var
query=params||{},qs,responseCb;if(typeof query!='object'||typeof cb!='function'){return false;}
if(!params.method_access&&!params.method_force&&!VK.Api.checkMethod(method,params,cb,queryTry)){return;}
if(!queryTry)queryTry=0;if(VK.Auth._loadState!='loaded'){var authFunc=function(result){if(result&&result.session){VK.Observer.unsubscribe('auth.loginStatus',authFunc);VK.Api.call(method,params,cb);}};VK.Observer.subscribe('auth.loginStatus',authFunc);VK.Auth.getLoginStatus();return;}
if(VK.Api.queryLength(query)<1500&&!VK.Api.ie6_7()){var useXDM=false;var rnd=parseInt(Math.random()*10000000,10);while(VK.Api._callbacks[rnd]){rnd=parseInt(Math.random()*10000000,10)}
query.callback='VK.Api._callbacks['+rnd+']';}else{var useXDM=true;}
if(VK._session&&VK._session.sid){query.access_token=VK._session.sid;}
qs=VK.Cookie.encode(query);responseCb=function(response){if(response.error&&(response.error.error_code==3||response.error.error_code==4||response.error.error_code==5)){if(queryTry>3)return false;var repeatCall=function(resp){VK.Observer.unsubscribe('auth.sessionChange',repeatCall);delete params.access_token;if(resp.session)VK.Api.call(method,params,cb,queryTry+1);}
VK.Observer.subscribe('auth.sessionChange',repeatCall);VK.Auth.getLoginStatus();}else{cb(response);}
if(!useXDM)delete VK.Api._callbacks[rnd];};if(useXDM){if(VK.xdReady){VK.XDM.remote.callMethod('apiCall',method,qs,responseCb);}else{VK.Observer.subscribe('xdm.init',function(){VK.XDM.remote.callMethod('apiCall',method,qs,responseCb);});VK.XDM.init();}}else{VK.Api._callbacks[rnd]=responseCb;VK.Api.attachScript(VK._domain.api+'method/'+method+'?'+qs);}},queryLength:function(query){var len=100,i;for(i in query){len+=i.length+encodeURIComponent(query.i).length+1;}
return len;}};VK.api=function(method,params,cb){VK.Api.call(method,params,cb);}};if(!VK.Auth){VK.Auth={popup:null,lsCb:{},setSession:function(session,status,settings,resp){var
login=!VK._session&&session,logout=VK._session&&!session,both=VK._session&&session&&VK._session.mid!=session.mid,sessionChange=login||logout||(VK._session&&session&&VK._session.sid!=session.sid),statusChange=status!=VK._userStatus,response={'session':session,'status':status,'settings':settings};VK._session=session;VK._userStatus=status;VK.Cookie.set(session,resp);if(sessionChange||statusChange||both){setTimeout(function(){if(statusChange){VK.Observer.publish('auth.statusChange',response);}
if(logout||both){VK.Observer.publish('auth.logout',response);}
if(login||both){if(VK.xdReady)VK.XDM.remote.init(VK._apiId,session,status);VK.Observer.publish('auth.login',response);}
if(sessionChange){VK.Observer.publish('auth.sessionChange',response);}},0);}
return response;},login:function(cb,settings){var channel,url;if(!VK._apiId){return false;}
channel=window.location.protocol+'//'+window.location.hostname;url=VK._domain.main+VK._path.login+'?client_id='+VK._apiId+'&display=popup&redirect_uri=close.html&response_type=token';if(settings&&parseInt(settings,10)>0){url+='&scope='+settings;}
VK.Observer.unsubscribe('auth.onLogin');VK.Observer.subscribe('auth.onLogin',cb);VK.UI.popup({width:620,height:370,url:url});var authCallback=function(){VK.Auth.getLoginStatus(function(resp){VK.Observer.publish('auth.onLogin',resp);VK.Observer.unsubscribe('auth.onLogin');},true);}
VK.UI.popupOpened=true;var popupCheck=function(){if(!VK.UI.popupOpened)return false;try{if(!VK.UI.active.top){VK.UI.popupOpened=false;authCallback();return true;}}catch(e){VK.UI.popupOpened=false;authCallback();return true;}
setTimeout(popupCheck,100);};setTimeout(popupCheck,100);},logout:function(cb){VK.Auth.revokeGrants(cb);},revokeGrants:function(cb){var onLogout=function(resp){VK.Observer.unsubscribe('auth.statusChange',onLogout);if(cb)cb(resp);}
VK.Observer.subscribe('auth.statusChange',onLogout);if(VK._session&&VK._session.sid)VK.Api.attachScript('https://login.vk.com/?act=openapi&oauth=1&aid='+parseInt(VK._apiId,10)+'&location='+encodeURIComponent(window.location.hostname)+'&do_logout=1&token='+VK._session.sid);VK.Cookie.clear();},getSession:function(){return VK._session;},getLoginStatus:function(cb,force){if(!VK._apiId){return;}
if(cb){if(!force&&VK.Auth._loadState=='loaded'){cb({status:VK._userStatus,session:VK._session});return;}else{VK.Observer.subscribe('auth.loginStatus',cb);}}
if(!force&&VK.Auth._loadState=='loading'){return;}
VK.Auth._loadState='loading';var rnd=parseInt(Math.random()*10000000,10);while(VK.Auth.lsCb[rnd]){rnd=parseInt(Math.random()*10000000,10)}
VK.Auth.lsCb[rnd]=function(response){delete VK.Auth.lsCb[rnd];VK.Auth._loadState='loaded';if(response&&response.auth){var session={mid:response.user.id,sid:response.access_token,sig:response.sig,secret:response.secret,expire:response.expire};if(force)session.user=response.user;var status='connected';}else{var session=null;var status=response.user?'logined':'unknown';VK.Cookie.clear();}
VK.Auth.setSession(session,status,false,response);VK.Observer.publish('auth.loginStatus',{session:session,status:status});VK.Observer.unsubscribe('auth.loginStatus');};VK.Api.attachScript('https://login.vk.com/?act=openapi&oauth=1&aid='+parseInt(VK._apiId,10)+'&location='+encodeURIComponent(window.location.hostname)+'&rnd='+rnd);}};}}else{setTimeout(function(){var callback;while(callback=VK.xdConnectionCallbacks.pop()){callback();}},0);if(VK.Widgets&&!VK.Widgets._constructor){VK.Widgets=false;}}
if(!VK.UI){VK.UI={active:null,_buttons:[],popup:function(options){var
screenX=typeof window.screenX!='undefined'?window.screenX:window.screenLeft,screenY=typeof window.screenY!='undefined'?window.screenY:window.screenTop,outerWidth=typeof window.outerWidth!='undefined'?window.outerWidth:document.body.clientWidth,outerHeight=typeof window.outerHeight!='undefined'?window.outerHeight:(document.body.clientHeight-22),width=options.width,height=options.height,left=parseInt(screenX+((outerWidth-width)/2),10),top=parseInt(screenY+((outerHeight-height)/2.5),10),features=('width='+width+',height='+height+',left='+left+',top='+top);this.active=window.open(options.url,'vk_openapi',features);},button:function(el,handler){var html='';if(typeof el=='string'){el=document.getElementById(el);}
this._buttons.push(el);index=this._buttons.length-1;html=('<table cellspacing="0" cellpadding="0" id="openapi_UI_'+index+'" onmouseover="VK.UI._change(1, '+index+');" onmouseout="VK.UI._change(0, '+index+');" onmousedown="VK.UI._change(2, '+index+');" onmouseup="VK.UI._change(1, '+index+');" style="cursor: pointer; border: 0px; font-family: tahoma, arial, verdana, sans-serif, Lucida Sans; font-size: 10px;"><tr style="vertical-align: middle">'+'<td><div style="border: 1px solid #3b6798;border-radius: 2px 0px 0px 2px;-moz-border-radius: 2px 0px 0px 2px;-webkit-border-radius: 2px 0px 0px 2px;"><div style="border: 1px solid #5c82ab; border-top-color: #7e9cbc; background-color: #6D8DB1; color: #fff; text-shadow: 0px 1px #45688E; height: 15px; padding: 2px 4px 0px 6px;line-height: 13px;">&#1042;&#1086;&#1081;&#1090;&#1080;</div></div></td>'+'<td><div style="background: url('+VK._protocol+'//vk.com/images/btns.png) 0px -42px no-repeat; width: 21px; height: 21px"></div></td>'+'<td><div style="border: 1px solid #3b6798;border-radius: 0px 2px 2px 0px;-moz-border-radius: 0px 2px 2px 0px;-webkit-border-radius: 0px 2px 2px 0px;"><div style="border: 1px solid #5c82ab; border-top-color: #7e9cbc; background-color: #6D8DB1; color: #fff; text-shadow: 0px 1px #45688E; height: 15px; padding: 2px 6px 0px 4px;line-height: 13px;">&#1050;&#1086;&#1085;&#1090;&#1072;&#1082;&#1090;&#1077;</div></div></td>'+'</tr></table>');el.innerHTML=html;el.style.width=el.childNodes[0].offsetWidth+'px';},_change:function(state,index){var row=document.getElementById('openapi_UI_'+index).rows[0];var elems=[row.cells[0].firstChild.firstChild,row.cells[2].firstChild.firstChild];for(var i=0;i<2;++i){var elem=elems[i];if(state===0){elem.style.backgroundColor='#6D8DB1';elem.style.borderTopColor='#7E9CBC';elem.style.borderLeftColor=elem.style.borderRightColor=elem.style.borderBottomColor='#5C82AB';}else if(state==1){elem.style.backgroundColor='#7693B6';elem.style.borderTopColor='#88A4C4';elem.style.borderLeftColor=elem.style.borderRightColor=elem.style.borderBottomColor='#6088B4';}else if(state==2){elem.style.backgroundColor='#6688AD';elem.style.borderBottomColor='#7495B8';elem.style.borderLeftColor=elem.style.borderRightColor=elem.style.borderTopColor='#51779F';}}
if(state===0||state==2){row.cells[2].firstChild.style.backgroundPosition='0px -42px';}else if(state==1){row.cells[2].firstChild.style.backgroundPosition='0px -63px';}}};}
if(!VK.XDM){VK.XDM={remote:null,init:function(){if(this.remote)return false;var url=VK._domain.api+VK._path.proxy;this.remote=new fastXDM.Server({onInit:function(){VK.XDM.remote.callMethod('init',VK._apiId,VK._session,VK._userStatus);VK.xdReady=true;VK.Observer.publish('xdm.init');},setSession:{isVoid:true,method:function(session,status){VK.Auth.setSession(session,status);}},alert:{isVoid:true,method:function(text){alert(text);}}});this.remote.append(document.getElementById(VK._rootId),{src:url});},xdHandler:function(code){try{eval('VK.'+code);}catch(e){}}};}
if(!VK.Observer){VK.Observer={_subscribers:function(){if(!this._subscribersMap){this._subscribersMap={};}
return this._subscribersMap;},publish:function(eventName){var
args=Array.prototype.slice.call(arguments),eventName=args.shift(),subscribers=this._subscribers()[eventName],i,j;if(!subscribers)return;for(i=0,j=subscribers.length;i<j;i++){if(subscribers[i]!=null){subscribers[i].apply(this,args);}}},subscribe:function(eventName,handler){var
subscribers=this._subscribers();if(typeof handler!='function')return false;if(!subscribers[eventName]){subscribers[eventName]=[handler];}else{subscribers[eventName].push(handler);}},unsubscribe:function(eventName,handler){var
subscribers=this._subscribers()[eventName],i,j;if(!subscribers)return false;if(typeof handler=='function'){for(i=0,j=subscribers.length;i<j;i++){if(subscribers[i]==handler){subscribers[i]=null;}}}else{delete this._subscribers()[eventName];}}};}
if(!VK.Widgets){VK.Widgets={};VK.Widgets.count=0;VK.Widgets.RPC={};VK.Widgets.loading=function(obj,enabled){obj.style.background=enabled?'url("'+VK._protocol+'//vk.com/images/upload.gif") center center no-repeat transparent':'none';};VK.Widgets.Comments=function(objId,options,page){var pData=VK.Util.getPageData();if(!VK._apiId)throw Error('VK not initialized. Please use VK.init');options=options||{};var params={limit:options.limit||10,height:options.height||0,mini:options.mini===undefined?'auto':options.mini,norealtime:options.norealtime?1:0},mouseup=function(){rpc.callMethod('mouseUp');return false;},move=function(event){rpc.callMethod('mouseMove',{screenY:event.screenY});},iframe,rpc;if(options.browse){params.browse=1;params.replies=options.replies||0;}else{VK.extend(params,{page:page||0,status_publish:options.autoPublish===undefined?1:options.autoPublish,attach:options.attach===undefined?'*':(options.attach?options.attach:''),url:options.pageUrl||pData.url,title:options.pageTitle||pData.title,description:options.pageDescription||pData.description,image:options.pageImage||pData.image});}
if(options.onChange){VK.Observer.subscribe('widgets.comments.new_comment',options.onChange);VK.Observer.subscribe('widgets.comments.delete_comment',options.onChange);}
return VK.Widgets._constructor('widget_comments.php',objId,options,params,{showBox:function(url,props){var box=VK.Util.Box((options.base_domain||VK._protocol+'//vk.com/')+url,[props.width,props.height],{proxy:function(){rpc.callMethod.apply(rpc,arguments);}});box.show();},startDrag:function(){cursorBack=window.document.body.style.cursor;window.document.body.style.cursor='pointer';VK.Util.addEvent('mousemove',move);VK.Util.addEvent('mouseup',mouseup);},stopDrag:function(){window.document.body.style.cursor=cursorBack;VK.Util.removeEvent('mousemove',move);VK.Util.removeEvent('mouseup',mouseup);}},{startHeight:133,minWidth:300,width:'100%'},function(o,i,r){iframe=i;rpc=r;});};VK.Widgets.CommentsBrowse=function(objId,options){options=options||{};options.browse=1;return VK.Widgets.Comments(objId,options);};VK.Widgets.Recommended=function(objId,options){var pData=VK.Util.getPageData();if(!VK._apiId)throw Error('VK not initialized. Please use VK.init');options=options||{};var params={limit:options.limit||5,max:options.max||0,sort:options.sort||'friend_likes',verb:options.verb||0,period:options.period||'week',target:options.target||'parent'};return VK.Widgets._constructor('widget_recommended.php',objId,options,params,{},{startHeight:(90+params.limit*30),minWidth:150,width:'100%'});};VK.Widgets.Like=function(objId,options,page){var pData=VK.Util.getPageData();if(!VK._apiId)throw Error('VK not initialized. Please use VK.init');options=VK.extend(options||{},{allowTransparency:true});if(options.type=='button'||options.type=='vertical'||options.type=='mini')delete options.width;var
type=(options.type=='full'||options.type=='button'||options.type=='vertical'||options.type=='mini')?options.type:'full',width=type=='full'?Math.max(200,options.width||350):(type=='button'?180:(type=='mini'?100:41)),btnHeight=parseInt(options.height,10)||22,height=type=='vertical'?(2*btnHeight+7):(type=='full'?btnHeight+1:btnHeight),params={page:page||0,url:options.pageUrl||pData.url,type:type,verb:options.verb==1?1:0,title:options.pageTitle||pData.title,description:options.pageDescription||pData.description,image:options.pageImage||pData.image,text:(options.text||'').substr(0,140),h:btnHeight},ttHere=options.ttHere||false,isOver=false,obj,buttonIfr,buttonRpc,tooltipIfr,tooltipRpc,checkTO,statsBox;function showTooltip(force){if((!isOver&&!force)||!tooltipRpc)return;if(!tooltipIfr||!tooltipRpc||tooltipIfr.style.display!='none'&&tooltipIfr.getAttribute('vkhidden')!='yes')return;var scrollTop=options.getScrollTop?options.getScrollTop():(document.body.scrollTop||document.documentElement.scrollTop||0);var objPos=VK.Util.getXY(obj,options.fixed);var startY=ttHere?0:objPos[1];if(scrollTop>objPos[1]-120&&options.tooltipPos!='top'||type=='vertical'||options.tooltipPos=='bottom'){tooltipIfr.style.top=(startY+height+2)+'px';tooltipRpc.callMethod('show',false);}else{tooltipIfr.style.top=(startY-125)+'px';tooltipRpc.callMethod('show',true);}
VK.Util.ss(tooltipIfr,{left:((ttHere?0:objPos[0])-(type=='vertical'||type=='mini'?36:2))+'px',display:'block',opacity:1,filter:'none'});tooltipIfr.setAttribute('vkhidden','no');isOver=true;}
function hideTooltip(force){if((isOver&&!force)||!tooltipRpc)return;tooltipRpc.callMethod('hide');buttonRpc.callMethod('hide');setTimeout(function(){tooltipIfr.style.display='none'},400);}
return VK.Widgets._constructor('widget_like.php',objId,options,params,{initTooltip:function(counter){tooltipRpc=new fastXDM.Server({onInit:counter?function(){showTooltip(true)}:function(){},proxy:function(){buttonRpc.callMethod.apply(buttonRpc,arguments);},showBox:function(url,props){var box=VK.Util.Box((options.base_domain||VK._protocol+'//vk.com/')+url,[props.width,props.height],{proxy:function(){tooltipRpc.callMethod.apply(tooltipRpc,arguments);}});box.show();},statsBox:function(act){hideTooltip(true);statsBox=VK.Util.Box(buttonIfr.src+'&act=a_stats_box',[498,442]);statsBox.show();}});tooltipIfr=tooltipRpc.append(ttHere?obj:document.body,{src:buttonIfr.src+'&act=a_share_tooltip',scrolling:'no',allowTransparency:true,id:buttonIfr.id+'_tt',style:{position:'absolute',padding:0,display:'block',opacity:0.01,filter:'alpha(opacity=1)',border:'0',width:'206px',height:'127px',zIndex:5000,overflow:'hidden'}});tooltipIfr.setAttribute('vkhidden','yes');obj.onmouseover=tooltipIfr.onmouseover=function(){isOver=true;};obj.onmouseout=tooltipIfr.onmouseout=function(){clearTimeout(checkTO);isOver=false;checkTO=setTimeout(function(){hideTooltip();},200);};},showTooltip:showTooltip,hideTooltip:hideTooltip,showBox:function(url,props){var box=VK.Util.Box((options.base_domain||VK._protocol+'//vk.com/')+url,[props.width,props.height],{proxy:function(){buttonRpc.callMethod.apply(buttonRpc,arguments);}});box.show();},proxy:function(){if(tooltipRpc)tooltipRpc.callMethod.apply(tooltipRpc,arguments);}},{startHeight:height,minWidth:width},function(o,i,r){buttonRpc=r;VK.Util.ss(obj=o,{height:height+'px',width:width+'px',position:'relative',clear:'both'});VK.Util.ss(buttonIfr=i,{height:height+'px',width:width+'px',overflow:'hidden',zIndex:150});});};VK.Widgets.Poll=function(objId,options,pollId){var pData=VK.Util.getPageData();if(!pollId)throw Error('No poll id passed');options=options||{};var params={poll_id:pollId,url:options.pageUrl||pData.url||location.href,title:options.pageTitle||pData.title,description:options.pageDescription||pData.description};return VK.Widgets._constructor('widget_poll.php',objId,options,params,{},{startHeight:133,minWidth:300,width:'100%'});};VK.Widgets.PagePoll=function(objId,options,page){var pData=VK.Util.getPageData();options=options||{};var params={page:page||0,norealtime:options.norealtime?1:0,poll_id:options.pollId||'',url:options.pageUrl||pData.url||location.href,title:options.pageTitle||pData.title,description:options.pageDescription||pData.description};return VK.Widgets._constructor('al_widget_poll.php',objId,options,params,{},{startHeight:133,minWidth:300,width:'100%'});};VK.Widgets.Community=VK.Widgets.Group=function(objId,options,gid){gid=parseInt(gid,10);var RPC;if(!gid){throw Error('No group_id passed');}
options.mode=parseInt(options.mode,10).toString();var params={gid:gid,mode:(options.mode)?options.mode:'0'};if(!options.width)options.width=200;if(options.wall)params.wall=options.wall;params.color1=options.color1||'';params.color2=options.color2||'';params.color3=options.color3||'';if(options.no_head)params.no_head=1;if(!options.height)options.height=290;if(options.wide){params.wide=1;if(options.width<300){options.width=300;}}
var cursorBack;function mouseup(){RPC.callMethod('mouseUp');return false;}
function move(event){RPC.callMethod('mouseMove',{screenY:event.screenY});return false;}
return VK.Widgets._constructor('widget_community.php',objId,options,params,{showBox:function(url,props){var box=VK.Util.Box((options.base_domain||VK._protocol+'//vk.com/')+url,[props.width,props.height],{proxy:function(){rpc.callMethod.apply(rpc,arguments);}});box.show();},startDrag:function(){cursorBack=window.document.body.style.cursor;window.document.body.style.cursor='pointer';VK.Util.addEvent('mousemove',move);VK.Util.addEvent('mouseup',mouseup);},stopDrag:function(){window.document.body.style.cursor=cursorBack;VK.Util.removeEvent('mousemove',move);VK.Util.removeEvent('mouseup',mouseup);},auth:function(){VK.Auth.login(null,1);}},{minWidth:120,width:'200',height:'290',startHeight:200},function(o,i,r){RPC=r;});};VK.Widgets.Auth=function(objId,options){var pData=VK.Util.getPageData();if(!VK._apiId)throw Error('VK not initialized. Please use VK.init');if(!options.width){options.width=200;}
if(options.type){type=1;}else{type=0;}
return VK.Widgets._constructor('widget_auth.php',objId,options,{},{makeAuth:function(data){if(data.session){VK.Auth._loadState='loaded';VK.Auth.setSession(data.session,'connected');VK.Observer.publish('auth.loginStatus',{session:data.session,status:'connected'});VK.Observer.unsubscribe('auth.loginStatus');}
if(options.onAuth){options.onAuth(data);}else{if(options.authUrl){var href=options.authUrl;}else{var href=window.location.href;}
if(href.indexOf('?')==-1){href+='?';}else{href+='&';}
var vars=[];for(var i in data){if(i!='session')vars.push(i+'='+decodeURIComponent(data[i]).replace(/&/g,'%26').replace(/\?/,'%3F'));}
window.location.href=href+vars.join('&');}}},{startHeight:80});};VK.Widgets.Subscribe=function(objId,options,oid){oid=parseInt(oid,10);var RPC;if(!oid){throw Error('No owner_id passed');}
var params={oid:oid};if(options.mode){params.mode=options.mode;}
if(options.soft){params.soft=options.soft;}
return VK.Widgets._constructor('widget_subscribe.php',objId,options,params,{showBox:function(url,props){var box=VK.Util.Box((options.base_domain||VK._protocol+'//vk.com/')+url,[props.width,props.height],{proxy:function(){rpc.callMethod.apply(rpc,arguments);}});box.show();},auth:function(){VK.Auth.login(null,1);}},{minWidth:220,startHeight:22,height:options.height||22},function(o,i,r){RPC=r;});};VK.Widgets.Ads=function(objId,options,paramsExtra){options=options||{};paramsExtra=paramsExtra||{};var params={};var defaults={};var funcs={};var obj;var iframe;var rpc;var paramsExtraFix={};for(var key in paramsExtra){var keyFix=(inArray(key,['ads_count','hash'])?key:'ads_'+key);paramsExtraFix[keyFix]=paramsExtra[key];}
if(paramsExtraFix.ads_ad_unit_width==='auto'||paramsExtraFix.ads_ad_unit_height==='auto'){obj=document.getElementById(objId);if(obj&&obj.getBoundingClientRect){obj.style.width='100%';obj.style.height='100%';var rect=obj.getBoundingClientRect();obj.style.width='';obj.style.height='';if(paramsExtraFix.ads_ad_unit_width==='auto'){paramsExtraFix.ads_ad_unit_width=Math.floor(rect.right-rect.left);if(!paramsExtraFix.ads_ad_unit_width){delete paramsExtraFix.ads_ad_unit_width;}}
if(paramsExtraFix.ads_ad_unit_height==='auto'){paramsExtraFix.ads_ad_unit_height=Math.floor(rect.bottom-rect.top);if(!paramsExtraFix.ads_ad_unit_height){delete paramsExtraFix.ads_ad_unit_height;}}}
if(paramsExtraFix.ads_ad_unit_width==='auto'){delete paramsExtraFix.ads_ad_unit_width;}
if(paramsExtraFix.ads_ad_unit_height==='auto'){delete paramsExtraFix.ads_ad_unit_height;}}
var width=(paramsExtraFix&&parseInt(paramsExtraFix.ads_ad_unit_width)||100);var height=(paramsExtraFix&&parseInt(paramsExtraFix.ads_ad_unit_height)||100);var handler=paramsExtraFix.ads_handler;var handlerEmptyHtml=paramsExtraFix.ads_handler_empty_html;delete paramsExtraFix.ads_handler;delete paramsExtraFix.ads_handler_empty_html;params.act='ads_web';params.url=location.href;VK.extend(params,paramsExtraFix);options.noDefaultParams=true;options.width=width;options.allowTransparency=true;defaults.startHeight=height;defaults.minWidth=width;funcs.adsOnInit=adsOnInit;funcs.adsCheckVisible=adsCheckVisible;funcs.adsAddEvents=adsAddEvents;return VK.Widgets._constructor('ads_rotate.php',objId,options,params,funcs,defaults,onDone);function adsOnInit(){if(options.onAdsReady)options.onAdsReady.apply(options.onAdsReady,Array.prototype.slice.call(arguments));var errorCode=arguments[0];var handlerResult=adsEvalHandler(handler,errorCode);if(errorCode<=0&&handlerResult!==true){adsInsertHtmlHandler(handlerEmptyHtml,paramsExtraFix.ads_ad_unit_width,paramsExtraFix.ads_ad_unit_height);}}
function adsCheckVisible(oneAdMaxWidth,oneAdMaxHeight){var isVisibleAds=true;var windowWidth=Math.max(parseInt(window.innerWidth)||0,parseInt(document.documentElement.clientWidth)||0);var windowHeight=Math.max(parseInt(window.innerHeight)||0,parseInt(document.documentElement.clientHeight)||0);if(iframe.getBoundingClientRect){var iframeRect=iframe.getBoundingClientRect();var firstAdCenterX=iframeRect.left+oneAdMaxWidth*0.5;var firstAdCenterY=iframeRect.top+oneAdMaxHeight*0.5;isVisibleAds=(isVisibleAds&&firstAdCenterX>0&&firstAdCenterX<windowWidth);isVisibleAds=(isVisibleAds&&firstAdCenterY>0&&firstAdCenterY<windowHeight);if(document.elementFromPoint&&oneAdMaxWidth&&oneAdMaxHeight){isVisibleAds=(isVisibleAds&&document.elementFromPoint(firstAdCenterX,firstAdCenterY)===iframe);}}
rpc.callMethod('onAdsCheckVisibleResult',isVisibleAds);}
function adsAddEvents(adsScriptVersion){VK.Observer.subscribe('ads.onHasFocus',function(){rpc.callMethod('onAdsHasFocus');})
VK.Observer.subscribe('ads.onFocusWindow',function(){rpc.callMethod('onAdsFocusWindow');})
VK.Observer.subscribe('ads.onBlurWindow',function(){rpc.callMethod('onAdsBlurWindow');})
VK.Observer.subscribe('ads.onMouseDownDocument',function(){rpc.callMethod('onAdsMouseDownDocument');})
VK.Observer.subscribe('ads.onMouseDownDocumentAction',function(){rpc.callMethod('onAdsMouseDownDocumentAction');})
adsAttachScript(adsScriptVersion);}
function adsAttachScript(adsScriptVersion){if(window.vk__adsLight){if(vk__adsLight.onInit){vk__adsLight.onInit();}}else{adsScriptVersion=parseInt(adsScriptVersion);var attachScriptFucn=(VK.Api&&VK.Api.attachScript||VK.addScript);var base_domain=(options.base_domain||VK._protocol+'//vk.com');attachScriptFucn(base_domain+'/js/al/aes_light.js?'+adsScriptVersion);}}
function adsEvalHandler(handler){var result=false;try{if(!handler){return false;}
var func=false;if(isFunction(handler)){func=handler;}else if(isString(handler)){var handlerFuncs=handler.split('.');func=window;for(var i=0,len=handlerFuncs.length;i<len;i++){func=func[handlerFuncs[i]];if(!func){break;}}
if(!func){var handlerResult=(new Function(handler))();if(isFunction(handlerResult)){func=handlerResult;}else{result=handlerResult;}}}
if(func){var args=Array.prototype.slice.call(arguments,1);result=func.apply(func,args);}}catch(e){try{console.error(e);}catch(e2){}}
return result;function isFunction(obj){return Object.prototype.toString.call(obj)==='[object Function]';}
function isString(obj){return Object.prototype.toString.call(obj)==='[object String]';}}
function adsInsertHtmlHandler(handlerHtml,width,height){if(!handlerHtml){return;}
if(!obj||!iframe){return;}
width=(width?width+'px':'');height=(height?height+'px':'');var iframeHandlerHtml='<html><head></head><body style="padding: 0; margin: 0;"><div>'+handlerHtml+'</div></body></html>';var iframeHandler=document.createElement('iframe');iframeHandler.onload=fixIframeHeight;iframeHandler.id=iframe.id+'_ads_html_handler';iframeHandler.src='about:blank';iframeHandler.width='100%';iframeHandler.height='100%';iframeHandler.scrolling='no';iframeHandler.frameBorder='0';iframeHandler.allowTransparency=true;iframeHandler.style.overflow='hidden';iframeHandler.style.width=width;iframeHandler.style.height=height;obj.style.width=width;obj.style.height=height;obj.appendChild(iframeHandler);iframeHandler.contentWindow.vk_ads_html_handler=iframeHandlerHtml;iframeHandler.src='javascript:window["vk_ads_html_handler"]';function fixIframeHeight(){if(height){return;}
try{var rect=iframeHandler.contentWindow.document.body.firstChild.getBoundingClientRect();var heightFix=Math.ceil(rect.bottom-rect.top);if(heightFix){iframeHandler.style.height=heightFix;obj.style.height=heightFix;}}catch(e){}}}
function indexOf(arr,value,from){for(var i=from||0,l=(arr||[]).length;i<l;i++){if(arr[i]==value)return i;}
return-1;}
function inArray(value,arr){return indexOf(arr,value)!=-1;}
function onDone(o,i,r){obj=o;iframe=i;rpc=r;}};VK.Widgets._constructor=function(widgetUrl,objId,options,params,funcs,defaults,onDone,widgetId,iter){var obj=document.getElementById(objId);widgetId=widgetId||(++VK.Widgets.count);if(!obj){iter=iter||0;if(iter>10){throw Error('VK.Widgets: object #'+objId+' not found.');}
setTimeout(function(){VK.Widgets._constructor(widgetUrl,objId,options,params,funcs,defaults,onDone,widgetId,iter+1);},500);return widgetId;}
var ifr,base_domain,width,url,urlQueryString,encodedParam,rpc,iframe,i;options=options||{};defaults=defaults||{};funcs=funcs||{};base_domain=options.base_domain||VK._protocol+'//vk.com';width=(options.width=='auto')?obj.clientWidth||'100%':parseInt(options.width,10);if(options.height){params.height=options.height;obj.style.height=options.height+'px';}else{obj.style.height=(defaults.startHeight||200)+'px';}
width=width?(Math.max(defaults.minWidth||200,Math.min(10000,width))+'px'):'100%';if(!params.url){params.url=options.pageUrl||location.href.replace(/#.*$/,'');}
url=base_domain+'/'+widgetUrl;urlQueryString='';if(!options.noDefaultParams){urlQueryString+='&app='+(VK._apiId||'0')+'&width='+width}
if(VK._iframeAppWidget){params.iframe_app=1;}
for(i in params){if(i=='title'&&params[i].length>80)params[i]=params[i].substr(0,80)+'...';if(i=='description'&&params[i].length>160)params[i]=params[i].substr(0,160)+'...';if(typeof(params[i])=='number'){encodedParam=params[i];}else{try{encodedParam=encodeURIComponent(params[i]);}catch(e){encodedParam='';}}
urlQueryString+='&'+i+'='+encodedParam;}
urlQueryString+='&'+(+new Date()).toString(16);url+='?'+urlQueryString.substr(1);obj.style.width=width;VK.Widgets.loading(obj,true);funcs.publish=function(){var args=Array.prototype.slice.call(arguments);args.push(widgetId);VK.Observer.publish.apply(VK.Observer,args);};funcs.onInit=function(){VK.Widgets.loading(obj,false);if(funcs.onReady)funcs.onReady();if(options.onReady)options.onReady();}
funcs.resize=function(e,cb){obj.style.height=e+'px';var el=document.getElementById('vkwidget'+widgetId);if(el){el.style.height=e+'px';}}
funcs.resizeWidget=function(newWidth,newHeight){newWidth=parseInt(newWidth);newHeight=parseInt(newHeight);var widgetElem=document.getElementById('vkwidget'+widgetId);if(isFinite(newWidth)){obj.style.width=newWidth+'px';if(widgetElem){widgetElem.style.width=newWidth+'px';}}
if(isFinite(newHeight)){obj.style.height=newHeight+'px';if(widgetElem){widgetElem.style.height=newHeight+'px';}}
if(options.onResizeWidget)options.onResizeWidget();}
rpc=VK.Widgets.RPC[widgetId]=new fastXDM.Server(funcs,function(origin){if(!origin)return true;origin=origin.toLowerCase();return(origin.indexOf('.vk.com')!=-1||origin.indexOf('/vk.com')!=-1);});iframe=VK.Widgets.RPC[widgetId].append(obj,{src:url,width:(width.indexOf('%')!=-1)?width:(parseInt(width)||width),height:defaults.startHeight||'100%',scrolling:'no',id:'vkwidget'+widgetId,allowTransparency:options.allowTransparency||false,style:{overflow:'hidden'}});onDone&&setTimeout(function(){onDone(obj,iframe||obj.firstChild,rpc);},10);return widgetId;};}
if(!VK.Util){VK.Util={getPageData:function(){if(!VK._pData){var metas=document.getElementsByTagName('meta'),pData={},keys=['description','title','url','image','app_id'],metaName;for(var i in metas){if(!metas[i].getAttribute)continue;if(metas[i].getAttribute&&((metaName=metas[i].getAttribute('name'))||(metaName=metas[i].getAttribute('property')))){for(var j in keys){if(metaName==keys[j]||metaName=='og:'+keys[j]||metaName=='vk:'+keys[j]){pData[keys[j]]=metas[i].content;}}}}
if(pData.app_id&&!VK._apiId){VK._apiId=pData.app_id;}
pData.title=pData.title||document.title||'';pData.description=pData.description||'';pData.image=pData.image||'';if(!pData.url&&VK._iframeAppWidget&&VK._apiId){pData.url='/app'+VK._apiId;if(VK._browserHash){pData.url+=VK._browserHash}}
var loc=location.href.replace(/#.*$/,'');if(!pData.url||!pData.url.indexOf(loc)){pData.url=loc;}
VK._pData=pData;}
return VK._pData;},getXY:function(obj,fixed){if(!obj||obj===undefined)return;var left=0,top=0;if(obj.offsetParent){do{left+=obj.offsetLeft;top+=obj.offsetTop;if(fixed){left-=obj.scrollLeft;top-=obj.scrollTop;}}while(obj=obj.offsetParent);}
if(fixed){top+=window.pageYOffset||window.scrollNode&&scrollNode.scrollTop||document.documentElement.scrollTop;}
return[left,top];},Box:function(src,sizes,fnc,options){fnc=fnc||{};var rpc=new fastXDM.Server(VK.extend(fnc,{onInit:function(){iframe.style.background='transparent';},hide:function(){iframe.style.display='none';},destroy:function(){try{iframe.src='about: blank;';}catch(e){}
iframe.parentNode.removeChild(iframe);},resize:function(w,h){sizes[0]=w;sizes[1]=h;VK.Util.ss(iframe,{width:sizes[0]+'px',height:sizes[1]+'px'});updateCoords();}},true)),iframe=rpc.append(document.body,{src:src,scrolling:'no',allowTransparency:true,style:{position:'absolute',left:'50%',zIndex:1002,background:VK._protocol+'//vk.com/images/upload.gif center center no-repeat transparent',padding:'0',border:'0',width:sizes[0]+'px',height:sizes[1]+'px',overflow:'hidden'}}),updateCoords=function(scrollTop,height){height=Math.min(1000,height||(window.innerHeight?window.innerHeight:(document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.offsetHeight)));scrollTop=scrollTop||Math.max(parseInt(window.pageYOffset,10)||0,document.documentElement.scrollTop,document.body.scrollTop);var top=Math.max(0,scrollTop+(height-sizes[1])/3);VK.Util.ss(iframe,{'top':top+'px',margin:'0 0 0 '+(-sizes[0]/2)+'px'});};return{show:function(scrollTop,height){updateCoords(scrollTop,height);iframe.style.display='block';},hide:function(){iframe.style.display='none';},iframe:iframe,rpc:rpc}},addEvent:function(type,func){if(window.document.addEventListener){window.document.addEventListener(type,func,false);}else if(window.document.attachEvent){window.document.attachEvent('on'+type,func);}},removeEvent:function(type,func){if(window.document.removeEventListener){window.document.removeEventListener(type,func,false);}else if(window.document.detachEvent){window.document.detachEvent('on'+type,func);}},ss:function(el,styles){VK.extend(el.style,styles,true);}};}
window.vkAsyncInit&&setTimeout(vkAsyncInit,0);if(window.vkAsyncInitCallbacks&&vkAsyncInitCallbacks.length){setTimeout(function(){var callback;while(callback=vkAsyncInitCallbacks.pop()){try{callback();}catch(e){try{console.error(e);}catch(e2){}}}},0);}
try{if(window.stManager)stManager.done('api/openapi.js');}catch(e){}!function($){$(function(){"use strict";$.support.transition=(function(){var transitionEnd=(function(){var el=document.createElement('bootstrap'),transEndEventNames={'WebkitTransition':'webkitTransitionEnd','MozTransition':'transitionend','OTransition':'oTransitionEnd otransitionend','transition':'transitionend'},name
for(name in transEndEventNames){if(el.style[name]!==undefined){return transEndEventNames[name]}}}())
return transitionEnd&&{end:transitionEnd}})()})}(window.jQuery);!function($){"use strict";var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on('click',dismiss,this.close)}
Alert.prototype.close=function(e){var $this=$(this),selector=$this.attr('data-target'),$parent
if(!selector){selector=$this.attr('href')
selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,'')}
$parent=$(selector)
e&&e.preventDefault()
$parent.length||($parent=$this.hasClass('alert')?$this:$this.parent())
$parent.trigger(e=$.Event('close'))
if(e.isDefaultPrevented())return
$parent.removeClass('in')
function removeElement(){$parent.trigger('closed').remove()}
$.support.transition&&$parent.hasClass('fade')?$parent.on($.support.transition.end,removeElement):removeElement()}
$.fn.alert=function(option){return this.each(function(){var $this=$(this),data=$this.data('alert')
if(!data)$this.data('alert',(data=new Alert(this)))
if(typeof option=='string')data[option].call($this)})}
$.fn.alert.Constructor=Alert
$(function(){$('body').on('click.alert.data-api',dismiss,Alert.prototype.close)})}(window.jQuery);!function($){"use strict";var Button=function(element,options){this.$element=$(element)
this.options=$.extend({},$.fn.button.defaults,options)}
Button.prototype.setState=function(state){var d='disabled',$el=this.$element,data=$el.data(),val=$el.is('input')?'val':'html'
state=state+'Text'
data.resetText||$el.data('resetText',$el[val]())
$el[val](data[state]||this.options[state])
setTimeout(function(){state=='loadingText'?$el.addClass(d).attr(d,d):$el.removeClass(d).removeAttr(d)},0)}
Button.prototype.toggle=function(){var $parent=this.$element.closest('[data-toggle="buttons-radio"]')
$parent&&$parent.find('.active').removeClass('active')
this.$element.toggleClass('active')}
$.fn.button=function(option){return this.each(function(){var $this=$(this),data=$this.data('button'),options=typeof option=='object'&&option
if(!data)$this.data('button',(data=new Button(this,options)))
if(option=='toggle')data.toggle()
else if(option)data.setState(option)})}
$.fn.button.defaults={loadingText:'loading...'}
$.fn.button.Constructor=Button
$(function(){$('body').on('click.button.data-api','[data-toggle^=button]',function(e){var $btn=$(e.target)
if(!$btn.hasClass('btn'))$btn=$btn.closest('.btn')
$btn.button('toggle')})})}(window.jQuery);!function($){"use strict";var Carousel=function(element,options){this.$element=$(element)
this.options=options
this.options.slide&&this.slide(this.options.slide)
this.options.pause=='hover'&&this.$element.on('mouseenter',$.proxy(this.pause,this)).on('mouseleave',$.proxy(this.cycle,this))}
Carousel.prototype={cycle:function(e){if(!e)this.paused=false
this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval))
return this},to:function(pos){var $active=this.$element.find('.item.active'),children=$active.parent().children(),activePos=children.index($active),that=this
if(pos>(children.length-1)||pos<0)return
if(this.sliding){return this.$element.one('slid',function(){that.to(pos)})}
if(activePos==pos){return this.pause().cycle()}
return this.slide(pos>activePos?'next':'prev',$(children[pos]))},pause:function(e){if(!e)this.paused=true
if(this.$element.find('.next, .prev').length&&$.support.transition.end){this.$element.trigger($.support.transition.end)
this.cycle()}
clearInterval(this.interval)
this.interval=null
return this},next:function(){if(this.sliding)return
return this.slide('next')},prev:function(){if(this.sliding)return
return this.slide('prev')},slide:function(type,next){var $active=this.$element.find('.item.active'),$next=next||$active[type](),isCycling=this.interval,direction=type=='next'?'left':'right',fallback=type=='next'?'first':'last',that=this,e=$.Event('slide',{relatedTarget:$next[0]})
this.sliding=true
isCycling&&this.pause()
$next=$next.length?$next:this.$element.find('.item')[fallback]()
if($next.hasClass('active'))return
if($.support.transition&&this.$element.hasClass('slide')){this.$element.trigger(e)
if(e.isDefaultPrevented())return
$next.addClass(type)
$next[0].offsetWidth
$active.addClass(direction)
$next.addClass(direction)
this.$element.one($.support.transition.end,function(){$next.removeClass([type,direction].join(' ')).addClass('active')
$active.removeClass(['active',direction].join(' '))
that.sliding=false
setTimeout(function(){that.$element.trigger('slid')},0)})}else{this.$element.trigger(e)
if(e.isDefaultPrevented())return
$active.removeClass('active')
$next.addClass('active')
this.sliding=false
this.$element.trigger('slid')}
isCycling&&this.cycle()
return this}}
$.fn.carousel=function(option){return this.each(function(){var $this=$(this),data=$this.data('carousel'),options=$.extend({},$.fn.carousel.defaults,typeof option=='object'&&option),action=typeof option=='string'?option:options.slide
if(!data)$this.data('carousel',(data=new Carousel(this,options)))
if(typeof option=='number')data.to(option)
else if(action)data[action]()
else if(options.interval)data.cycle()})}
$.fn.carousel.defaults={interval:5000,pause:'hover'}
$.fn.carousel.Constructor=Carousel
$(function(){$('body').on('click.carousel.data-api','[data-slide]',function(e){var $this=$(this),href,$target=$($this.attr('data-target')||(href=$this.attr('href'))&&href.replace(/.*(?=#[^\s]+$)/,'')),options=!$target.data('modal')&&$.extend({},$target.data(),$this.data())
$target.carousel(options)
e.preventDefault()})})}(window.jQuery);!function($){"use strict";var Collapse=function(element,options){this.$element=$(element)
this.options=$.extend({},$.fn.collapse.defaults,options)
if(this.options.parent){this.$parent=$(this.options.parent)}
this.options.toggle&&this.toggle()}
Collapse.prototype={constructor:Collapse,dimension:function(){var hasWidth=this.$element.hasClass('width')
return hasWidth?'width':'height'},show:function(){var dimension,scroll,actives,hasData
if(this.transitioning)return
dimension=this.dimension()
scroll=$.camelCase(['scroll',dimension].join('-'))
actives=this.$parent&&this.$parent.find('> .accordion-group > .in')
if(actives&&actives.length){hasData=actives.data('collapse')
if(hasData&&hasData.transitioning)return
actives.collapse('hide')
hasData||actives.data('collapse',null)}
this.$element[dimension](0)
this.transition('addClass',$.Event('show'),'shown')
$.support.transition&&this.$element[dimension](this.$element[0][scroll])},hide:function(){var dimension
if(this.transitioning)return
dimension=this.dimension()
this.reset(this.$element[dimension]())
this.transition('removeClass',$.Event('hide'),'hidden')
this.$element[dimension](0)},reset:function(size){var dimension=this.dimension()
this.$element.removeClass('collapse')
[dimension](size||'auto')
[0].offsetWidth
this.$element[size!==null?'addClass':'removeClass']('collapse')
return this},transition:function(method,startEvent,completeEvent){var that=this,complete=function(){if(startEvent.type=='show')that.reset()
that.transitioning=0
that.$element.trigger(completeEvent)}
this.$element.trigger(startEvent)
if(startEvent.isDefaultPrevented())return
this.transitioning=1
this.$element[method]('in')
$.support.transition&&this.$element.hasClass('collapse')?this.$element.one($.support.transition.end,complete):complete()},toggle:function(){this[this.$element.hasClass('in')?'hide':'show']()}}
$.fn.collapse=function(option){return this.each(function(){var $this=$(this),data=$this.data('collapse'),options=typeof option=='object'&&option
if(!data)$this.data('collapse',(data=new Collapse(this,options)))
if(typeof option=='string')data[option]()})}
$.fn.collapse.defaults={toggle:true}
$.fn.collapse.Constructor=Collapse
$(function(){$('body').on('click.collapse.data-api','[data-toggle=collapse]',function(e){var $this=$(this),href,target=$this.attr('data-target')||e.preventDefault()||(href=$this.attr('href'))&&href.replace(/.*(?=#[^\s]+$)/,''),option=$(target).data('collapse')?'toggle':$this.data()
$this[$(target).hasClass('in')?'addClass':'removeClass']('collapsed')
$(target).collapse(option)})})}(window.jQuery);!function($){"use strict";var toggle='[data-toggle=dropdown]',Dropdown=function(element){var $el=$(element).on('click.dropdown.data-api',this.toggle)
$('html').on('click.dropdown.data-api',function(){$el.parent().removeClass('open')})}
Dropdown.prototype={constructor:Dropdown,toggle:function(e){var $this=$(this),$parent,isActive
if($this.is('.disabled, :disabled'))return
$parent=getParent($this)
isActive=$parent.hasClass('open')
clearMenus()
if(!isActive){$parent.toggleClass('open')
$this.focus()}
return false},keydown:function(e){var $this,$items,$active,$parent,isActive,index
if(!/(38|40|27)/.test(e.keyCode))return
$this=$(this)
e.preventDefault()
e.stopPropagation()
if($this.is('.disabled, :disabled'))return
$parent=getParent($this)
isActive=$parent.hasClass('open')
if(!isActive||(isActive&&e.keyCode==27))return $this.click()
$items=$('[role=menu] li:not(.divider) a',$parent)
if(!$items.length)return
index=$items.index($items.filter(':focus'))
if(e.keyCode==38&&index>0)index--
if(e.keyCode==40&&index<$items.length-1)index++
if(!~index)index=0
$items.eq(index).focus()}}
function clearMenus(){getParent($(toggle)).removeClass('open')}
function getParent($this){var selector=$this.attr('data-target'),$parent
if(!selector){selector=$this.attr('href')
selector=selector&&/#/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,'')}
$parent=$(selector)
$parent.length||($parent=$this.parent())
return $parent}
$.fn.dropdown=function(option){return this.each(function(){var $this=$(this),data=$this.data('dropdown')
if(!data)$this.data('dropdown',(data=new Dropdown(this)))
if(typeof option=='string')data[option].call($this)})}
$.fn.dropdown.Constructor=Dropdown
$(function(){$('html').on('click.dropdown.data-api touchstart.dropdown.data-api',clearMenus)
$('body').on('click.dropdown touchstart.dropdown.data-api','.dropdown form',function(e){e.stopPropagation()}).on('click.dropdown.data-api touchstart.dropdown.data-api',toggle,Dropdown.prototype.toggle).on('keydown.dropdown.data-api touchstart.dropdown.data-api',toggle+', [role=menu]',Dropdown.prototype.keydown)})}(window.jQuery);!function($){"use strict";var Modal=function(element,options){this.options=options
this.$element=$(element).delegate('[data-dismiss="modal"]','click.dismiss.modal',$.proxy(this.hide,this))
this.options.remote&&this.$element.find('.modal-body').load(this.options.remote)}
Modal.prototype={constructor:Modal,toggle:function(){return this[!this.isShown?'show':'hide']()},show:function(){var that=this,e=$.Event('show')
this.$element.trigger(e)
if(this.isShown||e.isDefaultPrevented())return
$('body').addClass('modal-open')
this.isShown=true
this.escape()
this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass('fade')
if(!that.$element.parent().length){that.$element.appendTo(document.body)}
that.$element.show()
if(transition){that.$element[0].offsetWidth}
that.$element.addClass('in').attr('aria-hidden',false).focus()
that.enforceFocus()
transition?that.$element.one($.support.transition.end,function(){that.$element.trigger('shown')}):that.$element.trigger('shown')})},hide:function(e){e&&e.preventDefault()
var that=this
e=$.Event('hide')
this.$element.trigger(e)
if(!this.isShown||e.isDefaultPrevented())return
this.isShown=false
$('body').removeClass('modal-open')
this.escape()
$(document).off('focusin.modal')
this.$element.removeClass('in').attr('aria-hidden',true)
$.support.transition&&this.$element.hasClass('fade')?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var that=this
$(document).on('focusin.modal',function(e){if(that.$element[0]!==e.target&&!that.$element.has(e.target).length){that.$element.focus()}})},escape:function(){var that=this
if(this.isShown&&this.options.keyboard){this.$element.on('keyup.dismiss.modal',function(e){e.which==27&&that.hide()})}else if(!this.isShown){this.$element.off('keyup.dismiss.modal')}},hideWithTransition:function(){var that=this,timeout=setTimeout(function(){that.$element.off($.support.transition.end)
that.hideModal()},500)
this.$element.one($.support.transition.end,function(){clearTimeout(timeout)
that.hideModal()})},hideModal:function(that){this.$element.hide().trigger('hidden')
this.backdrop()},removeBackdrop:function(){this.$backdrop.remove()
this.$backdrop=null},backdrop:function(callback){var that=this,animate=this.$element.hasClass('fade')?'fade':''
if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate
this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(document.body)
if(this.options.backdrop!='static'){this.$backdrop.click($.proxy(this.hide,this))}
if(doAnimate)this.$backdrop[0].offsetWidth
this.$backdrop.addClass('in')
doAnimate?this.$backdrop.one($.support.transition.end,callback):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass('in')
$.support.transition&&this.$element.hasClass('fade')?this.$backdrop.one($.support.transition.end,$.proxy(this.removeBackdrop,this)):this.removeBackdrop()}else if(callback){callback()}}}
$.fn.modal=function(option){return this.each(function(){var $this=$(this),data=$this.data('modal'),options=$.extend({},$.fn.modal.defaults,$this.data(),typeof option=='object'&&option)
if(!data)$this.data('modal',(data=new Modal(this,options)))
if(typeof option=='string')data[option]()
else if(options.show)data.show()})}
$.fn.modal.defaults={backdrop:true,keyboard:true,show:true}
$.fn.modal.Constructor=Modal
$(function(){$('body').on('click.modal.data-api','[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr('href'),$target=$($this.attr('data-target')||(href&&href.replace(/.*(?=#[^\s]+$)/,''))),option=$target.data('modal')?'toggle':$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data())
e.preventDefault()
$target.modal(option).one('hide',function(){$this.focus()})})})}(window.jQuery);!function($){"use strict";var Tooltip=function(element,options){this.init('tooltip',element,options)}
Tooltip.prototype={constructor:Tooltip,init:function(type,element,options){var eventIn,eventOut
this.type=type
this.$element=$(element)
this.options=this.getOptions(options)
this.enabled=true
if(this.options.trigger=='click'){this.$element.on('click.'+this.type,this.options.selector,$.proxy(this.toggle,this))}else if(this.options.trigger!='manual'){eventIn=this.options.trigger=='hover'?'mouseenter':'focus'
eventOut=this.options.trigger=='hover'?'mouseleave':'blur'
this.$element.on(eventIn+'.'+this.type,this.options.selector,$.proxy(this.enter,this))
this.$element.on(eventOut+'.'+this.type,this.options.selector,$.proxy(this.leave,this))}
this.options.selector?(this._options=$.extend({},this.options,{trigger:'manual',selector:''})):this.fixTitle()},getOptions:function(options){options=$.extend({},$.fn[this.type].defaults,options,this.$element.data())
if(options.delay&&typeof options.delay=='number'){options.delay={show:options.delay,hide:options.delay}}
return options},enter:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type)
if(!self.options.delay||!self.options.delay.show)return self.show()
clearTimeout(this.timeout)
self.hoverState='in'
this.timeout=setTimeout(function(){if(self.hoverState=='in')self.show()},self.options.delay.show)},leave:function(e){var self=$(e.currentTarget)[this.type](this._options).data(this.type)
if(this.timeout)clearTimeout(this.timeout)
if(!self.options.delay||!self.options.delay.hide)return self.hide()
self.hoverState='out'
this.timeout=setTimeout(function(){if(self.hoverState=='out')self.hide()},self.options.delay.hide)},show:function(){var $tip,inside,pos,actualWidth,actualHeight,placement,tp
if(this.hasContent()&&this.enabled){$tip=this.tip()
this.setContent()
if(this.options.animation){$tip.addClass('fade')}
placement=typeof this.options.placement=='function'?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement
inside=/in/.test(placement)
$tip.remove().css({top:0,left:0,display:'block'}).appendTo(inside?this.$element:document.body)
pos=this.getPosition(inside)
actualWidth=$tip[0].offsetWidth
actualHeight=$tip[0].offsetHeight
switch(inside?placement.split(' ')[1]:placement){case'bottom':tp={top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}
break
case'top':tp={top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}
break
case'left':tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}
break
case'right':tp={top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}
break}
$tip.css(tp).addClass(placement).addClass('in')}},setContent:function(){var $tip=this.tip(),title=this.getTitle()
$tip.find('.tooltip-inner')[this.options.html?'html':'text'](title)
$tip.removeClass('fade in top bottom left right')},hide:function(){var that=this,$tip=this.tip()
$tip.removeClass('in')
function removeWithAnimation(){var timeout=setTimeout(function(){$tip.off($.support.transition.end).remove()},500)
$tip.one($.support.transition.end,function(){clearTimeout(timeout)
$tip.remove()})}
$.support.transition&&this.$tip.hasClass('fade')?removeWithAnimation():$tip.remove()
return this},fixTitle:function(){var $e=this.$element
if($e.attr('title')||typeof($e.attr('data-original-title'))!='string'){$e.attr('data-original-title',$e.attr('title')||'').removeAttr('title')}},hasContent:function(){return this.getTitle()},getPosition:function(inside){return $.extend({},(inside?{top:0,left:0}:this.$element.offset()),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var title,$e=this.$element,o=this.options
title=$e.attr('data-original-title')||(typeof o.title=='function'?o.title.call($e[0]):o.title)
return title},tip:function(){return this.$tip=this.$tip||$(this.options.template)},validate:function(){if(!this.$element[0].parentNode){this.hide()
this.$element=null
this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass('in')?'hide':'show']()},destroy:function(){this.hide().$element.off('.'+this.type).removeData(this.type)}}
$.fn.tooltip=function(option){return this.each(function(){var $this=$(this),data=$this.data('tooltip'),options=typeof option=='object'&&option
if(!data)$this.data('tooltip',(data=new Tooltip(this,options)))
if(typeof option=='string')data[option]()})}
$.fn.tooltip.Constructor=Tooltip
$.fn.tooltip.defaults={animation:true,placement:'top',selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:'hover',title:'',delay:0,html:true}}(window.jQuery);!function($){"use strict";var Popover=function(element,options){this.init('popover',element,options)}
Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype,{constructor:Popover,setContent:function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent()
$tip.find('.popover-title')[this.options.html?'html':'text'](title)
$tip.find('.popover-content > *')[this.options.html?'html':'text'](content)
$tip.removeClass('fade top bottom left right in')},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var content,$e=this.$element,o=this.options
content=$e.attr('data-content')||(typeof o.content=='function'?o.content.call($e[0]):o.content)
return content},tip:function(){if(!this.$tip){this.$tip=$(this.options.template)}
return this.$tip},destroy:function(){this.hide().$element.off('.'+this.type).removeData(this.type)}})
$.fn.popover=function(option){return this.each(function(){var $this=$(this),data=$this.data('popover'),options=typeof option=='object'&&option
if(!data)$this.data('popover',(data=new Popover(this,options)))
if(typeof option=='string')data[option]()})}
$.fn.popover.Constructor=Popover
$.fn.popover.defaults=$.extend({},$.fn.tooltip.defaults,{placement:'right',trigger:'click',content:'',template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery);!function($){"use strict";function ScrollSpy(element,options){var process=$.proxy(this.process,this),$element=$(element).is('body')?$(window):$(element),href
this.options=$.extend({},$.fn.scrollspy.defaults,options)
this.$scrollElement=$element.on('scroll.scroll-spy.data-api',process)
this.selector=(this.options.target||((href=$(element).attr('href'))&&href.replace(/.*(?=#[^\s]+$)/,''))||'')+' .nav li > a'
this.$body=$('body')
this.refresh()
this.process()}
ScrollSpy.prototype={constructor:ScrollSpy,refresh:function(){var self=this,$targets
this.offsets=$([])
this.targets=$([])
$targets=this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data('target')||$el.attr('href'),$href=/^#\w/.test(href)&&$(href)
return($href&&$href.length&&[[$href.position().top,href]])||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){self.offsets.push(this[0])
self.targets.push(this[1])})},process:function(){var scrollTop=this.$scrollElement.scrollTop()+this.options.offset,scrollHeight=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,maxScroll=scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget,i
if(scrollTop>=maxScroll){return activeTarget!=(i=targets.last()[0])&&this.activate(i)}
for(i=offsets.length;i--;){activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(!offsets[i+1]||scrollTop<=offsets[i+1])&&this.activate(targets[i])}},activate:function(target){var active,selector
this.activeTarget=target
$(this.selector).parent('.active').removeClass('active')
selector=this.selector
+'[data-target="'+target+'"],'
+this.selector+'[href="'+target+'"]'
active=$(selector).parent('li').addClass('active')
if(active.parent('.dropdown-menu').length){active=active.closest('li.dropdown').addClass('active')}
active.trigger('activate')}}
$.fn.scrollspy=function(option){return this.each(function(){var $this=$(this),data=$this.data('scrollspy'),options=typeof option=='object'&&option
if(!data)$this.data('scrollspy',(data=new ScrollSpy(this,options)))
if(typeof option=='string')data[option]()})}
$.fn.scrollspy.Constructor=ScrollSpy
$.fn.scrollspy.defaults={offset:10}
$(window).on('load',function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this)
$spy.scrollspy($spy.data())})})}(window.jQuery);!function($){"use strict";var Tab=function(element){this.element=$(element)}
Tab.prototype={constructor:Tab,show:function(){var $this=this.element,$ul=$this.closest('ul:not(.dropdown-menu)'),selector=$this.attr('data-target'),previous,$target,e
if(!selector){selector=$this.attr('href')
selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,'')}
if($this.parent('li').hasClass('active'))return
previous=$ul.find('.active a').last()[0]
e=$.Event('show',{relatedTarget:previous})
$this.trigger(e)
if(e.isDefaultPrevented())return
$target=$(selector)
this.activate($this.parent('li'),$ul)
this.activate($target,$target.parent(),function(){$this.trigger({type:'shown',relatedTarget:previous})})},activate:function(element,container,callback){var $active=container.find('> .active'),transition=callback&&$.support.transition&&$active.hasClass('fade')
function next(){$active.removeClass('active').find('> .dropdown-menu > .active').removeClass('active')
element.addClass('active')
if(transition){element[0].offsetWidth
element.addClass('in')}else{element.removeClass('fade')}
if(element.parent('.dropdown-menu')){element.closest('li.dropdown').addClass('active')}
callback&&callback()}
transition?$active.one($.support.transition.end,next):next()
$active.removeClass('in')}}
$.fn.tab=function(option){return this.each(function(){var $this=$(this),data=$this.data('tab')
if(!data)$this.data('tab',(data=new Tab(this)))
if(typeof option=='string')data[option]()})}
$.fn.tab.Constructor=Tab
$(function(){$('body').on('click.tab.data-api','[data-toggle="tab"], [data-toggle="pill"]',function(e){e.preventDefault()
$(this).tab('show')})})}(window.jQuery);!function($){"use strict";var Typeahead=function(element,options){this.$element=$(element)
this.options=$.extend({},$.fn.typeahead.defaults,options)
this.matcher=this.options.matcher||this.matcher
this.sorter=this.options.sorter||this.sorter
this.highlighter=this.options.highlighter||this.highlighter
this.updater=this.options.updater||this.updater
this.$menu=$(this.options.menu).appendTo('body')
this.source=this.options.source
this.shown=false
this.listen()}
Typeahead.prototype={constructor:Typeahead,select:function(){var val=this.$menu.find('.active').attr('data-value')
this.$element.val(this.updater(val)).change()
return this.hide()},updater:function(item){return item},show:function(){var pos=$.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight})
this.$menu.css({top:pos.top+pos.height,left:pos.left})
this.$menu.show()
this.shown=true
return this},hide:function(){this.$menu.hide()
this.shown=false
return this},lookup:function(event){var items
this.query=this.$element.val()
if(!this.query||this.query.length<this.options.minLength){return this.shown?this.hide():this}
items=$.isFunction(this.source)?this.source(this.query,$.proxy(this.process,this)):this.source
return items?this.process(items):this},process:function(items){var that=this
items=$.grep(items,function(item){return that.matcher(item)})
items=this.sorter(items)
if(!items.length){return this.shown?this.hide():this}
return this.render(items.slice(0,this.options.items)).show()},matcher:function(item){return~item.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(items){var beginswith=[],caseSensitive=[],caseInsensitive=[],item
while(item=items.shift()){if(!item.toLowerCase().indexOf(this.query.toLowerCase()))beginswith.push(item)
else if(~item.indexOf(this.query))caseSensitive.push(item)
else caseInsensitive.push(item)}
return beginswith.concat(caseSensitive,caseInsensitive)},highlighter:function(item){var query=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,'\\$&')
return item.replace(new RegExp('('+query+')','ig'),function($1,match){return'<strong>'+match+'</strong>'})},render:function(items){var that=this
items=$(items).map(function(i,item){i=$(that.options.item).attr('data-value',item)
i.find('a').html(that.highlighter(item))
return i[0]})
items.first().addClass('active')
this.$menu.html(items)
return this},next:function(event){var active=this.$menu.find('.active').removeClass('active'),next=active.next()
if(!next.length){next=$(this.$menu.find('li')[0])}
next.addClass('active')},prev:function(event){var active=this.$menu.find('.active').removeClass('active'),prev=active.prev()
if(!prev.length){prev=this.$menu.find('li').last()}
prev.addClass('active')},listen:function(){this.$element.on('blur',$.proxy(this.blur,this)).on('keypress',$.proxy(this.keypress,this)).on('keyup',$.proxy(this.keyup,this))
if($.browser.chrome||$.browser.webkit||$.browser.msie){this.$element.on('keydown',$.proxy(this.keydown,this))}
this.$menu.on('click',$.proxy(this.click,this)).on('mouseenter','li',$.proxy(this.mouseenter,this))},move:function(e){if(!this.shown)return
switch(e.keyCode){case 9:case 13:case 27:e.preventDefault()
break
case 38:e.preventDefault()
this.prev()
break
case 40:e.preventDefault()
this.next()
break}
e.stopPropagation()},keydown:function(e){this.suppressKeyPressRepeat=!~$.inArray(e.keyCode,[40,38,9,13,27])
this.move(e)},keypress:function(e){if(this.suppressKeyPressRepeat)return
this.move(e)},keyup:function(e){switch(e.keyCode){case 40:case 38:break
case 9:case 13:if(!this.shown)return
this.select()
break
case 27:if(!this.shown)return
this.hide()
break
default:this.lookup()}
e.stopPropagation()
e.preventDefault()},blur:function(e){var that=this
setTimeout(function(){that.hide()},150)},click:function(e){e.stopPropagation()
e.preventDefault()
this.select()},mouseenter:function(e){this.$menu.find('.active').removeClass('active')
$(e.currentTarget).addClass('active')}}
$.fn.typeahead=function(option){return this.each(function(){var $this=$(this),data=$this.data('typeahead'),options=typeof option=='object'&&option
if(!data)$this.data('typeahead',(data=new Typeahead(this,options)))
if(typeof option=='string')data[option]()})}
$.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>',minLength:1}
$.fn.typeahead.Constructor=Typeahead
$(function(){$('body').on('focus.typeahead.data-api','[data-provide="typeahead"]',function(e){var $this=$(this)
if($this.data('typeahead'))return
e.preventDefault()
$this.typeahead($this.data())})})}(window.jQuery);!function($){"use strict";var Affix=function(element,options){this.options=$.extend({},$.fn.affix.defaults,options)
this.$window=$(window).on('scroll.affix.data-api',$.proxy(this.checkPosition,this))
this.$element=$(element)
this.checkPosition()}
Affix.prototype.checkPosition=function(){if(!this.$element.is(':visible'))return
var scrollHeight=$(document).height(),scrollTop=this.$window.scrollTop(),position=this.$element.offset(),offset=this.options.offset,offsetBottom=offset.bottom,offsetTop=offset.top,reset='affix affix-top affix-bottom',affix
if(typeof offset!='object')offsetBottom=offsetTop=offset
if(typeof offsetTop=='function')offsetTop=offset.top()
if(typeof offsetBottom=='function')offsetBottom=offset.bottom()
affix=this.unpin!=null&&(scrollTop+this.unpin<=position.top)?false:offsetBottom!=null&&(position.top+this.$element.height()>=scrollHeight-offsetBottom)?'bottom':offsetTop!=null&&scrollTop<=offsetTop?'top':false
if(this.affixed===affix)return
this.affixed=affix
this.unpin=affix=='bottom'?position.top-scrollTop:null
this.$element.removeClass(reset).addClass('affix'+(affix?'-'+affix:''))}
$.fn.affix=function(option){return this.each(function(){var $this=$(this),data=$this.data('affix'),options=typeof option=='object'&&option
if(!data)$this.data('affix',(data=new Affix(this,options)))
if(typeof option=='string')data[option]()})}
$.fn.affix.Constructor=Affix
$.fn.affix.defaults={offset:0}
$(window).on('load',function(){$('[data-spy="affix"]').each(function(){var $spy=$(this),data=$spy.data()
data.offset=data.offset||{}
data.offsetBottom&&(data.offset.bottom=data.offsetBottom)
data.offsetTop&&(data.offset.top=data.offsetTop)
$spy.affix(data)})})}(window.jQuery);
function show_loader(){$('#title').fadeOut('fast',function(){$('#loader').fadeIn('fast');$('#search').val('');$('#content').animate({opacity:0.7},100);});}
function hide_loader(){$('#content').animate({opacity:1},100);$('#loader').fadeOut('fast',function(){$('#title').fadeIn('fast');});}
function login_form(show){if(show){login_button();$('#login').show();$('#login_loader').hide();}else{}}
var histpush=false;if(typeof history=='undefined'||!'pushState'in history||(typeof window.addEventListener=='undefined')){histpush=false;log('[History Push]: disabled');}else{histpush=true;window.addEventListener('popstate',function(){rd_ajax(history.state,1);});log('[History Push]: enabled');}
function show_lightbox(titles,infos,pic){var br=((titles.length>0)&&(infos.length>0))?'<b'+'r/>':'';var text=titles+br+infos;$('body').css('overflow','hidden');center_lightbox();$('#lightbox-img').css('background-image','none').css('background-image',"url('"+pic+"')");$('#lightbox-text').html(text);$('#lightbox-viewer-bg,#lightbox-viewer-container').fadeIn('fast');$('#lightbox-view-full').attr('href',pic).attr('target','_blank');}
function center_lightbox(){var a=($(window).height()/2)-($('#lightbox-viewer').height()/2)-20;var b=($(window).width()/2)-($('#lightbox-viewer').width()/2)-20;if(a<0){a=0;}
if(b<0){b=0;}
$('#lightbox-viewer').css('top',a).css('left',b);}
function init_lightbox(){if($('#lightbox-viewer-bg,#lightbox-viewer-container').length==0){$('body').append("<div id='lightbox-viewer-bg'></div><div id='lightbox-viewer-container'><div id='lightbox-viewer'><div id='lightbox-view-buttons' class='btn-toolbar'><a id='lightbox-view-full' data-title='Открыть полное изображение' class='btn btn-mini'><i class='icon-zoom-in'></i></a><a id='lightbox-view-close' data-title='Закрыть' class='btn btn-mini'><i class='icon-remove'></i></a></div><div id='lightbox-img-loading'></div><div id='lightbox-img'></div><div id='lightbox-panel'><p id='lightbox-text'></p></div></div></div>");}
center_lightbox();$('#lightbox-view-close,#lightbox-viewer-bg').click(function(){$('body').css('overflow','visible');$('#lightbox-viewer-bg,#lightbox-viewer-container').fadeOut('fast');});}
function Parse_Data(data,loadto){$("#"+loadto).fadeOut('fast',function(){log("Parsing data [to: '"+loadto+"']");hastitle=data.indexOf('#title#');hastext=data.indexOf('#content#');if((hastitle==-1)||(hastext==-1)){p_title="Ошибка!";p_text="<di"+"v class='alert alert-error'>Произошла ошибка при получении данных!<b"+"r>Перейдите на <"+"a href='index.php?act=news' class='rdajax'>главную страницу</"+"a><b"+"r><sm"+"all>Описание ошибки: parse error, title: "+hastitle+", content: "+hastext+".</sm"+"all></di"+"v><sc"+"ript>alert('Произошла ошибка при получении данных','error');</sc"+"ript>";}else{p_title=data.slice(hastitle+7,data.indexOf('#/title#'));p_text=data.slice(hastext+9,data.indexOf('#/content#'));}
$("#title").html(p_title);$("#"+loadto).html(p_text);document.title=js_site_name+": "+p_title;init();hide_loader();if(loadto!='ajax_temp'){$("#"+loadto).slideDown('normal');}});}
var hash_changed=0;var ajax_lock=false;var noscrollup=true;function rd_ajax(url,no_change_hash,meth,loadto,noparse){meth=meth||'get';loadto=loadto||'content';noparse=noparse||false;no_change_hash=no_change_hash||false;if((meth!='get')&&(meth!='post')){meth='get';}
if(((url!==null)||((url.indexOf('del')==-1)||(url.indexOf('confirmed')!=-1)))&&(!ajax_lock)){query_string=url;ajax_lock=true;log('[AJAX] =Parameters=\r\nMethod: '+meth+'\r\nLoadTo: '+loadto+'\r\nNoParse: '+noparse+'\r\nNoHashChange: '+no_change_hash+'\r\nUrl: '+url);if((location.hash.indexOf('debug')!=-1)&&(!debug)){debug=true;log('Debugger enabled');}
if(no_change_hash!=1){if(histpush){history.pushState('?'+url,'?'+url,'?'+url)}else{window.location.hash="#!/"+url;}}
hash_changed=2;show_loader();$('#like-box-button').popover('hide').popover('destroy');if((loadto=='content')&&!noscrollup){var topy=$('#title').position().top;$('html, body').animate({scrollTop:topy},300);}
if(noscrollup){noscrollup=false;}
$.ajax({type:meth,url:'index.php',dataType:'html',timeout:60000,cache:false,data:url,success:function(data){ajax_lock=false;if(noparse){hide_loader();}else{Parse_Data(data,loadto);}},error:function(objAJAXRequest,strError){if(noparse){hide_loader();alert('Ошибка при загрузке данных:<br>'+strError,'error');}else{ajax_lock=false;hide_loader();alert('Ошибка при загрузке данных:<br>'+strError,'error');};}});}else if(url===null){log('[AJAX]: error! Url is NULL');}else if(ajax_lock){alert('Пожалуйста, дождитесь окончания выполнения предыдущего запроса!');log('[AJAX]: ajax locked');}else{hide_loader();asker=confirm('Действительно удалить?');if(asker){rd_ajax(url+'&confirmed=1',no_change_hash,meth,loadto,noparse);}}}
function first_nav(){if((query_string=='')||(query_string=='#!/')){rd_ajax('act=news',1);}else{rd_ajax(query_string.replace('#!/',''),1);}}
function checkHash(){if(window.location.hash!=hash){if(hash_changed==1){hash=window.location.hash;processHash(hash);}}
hash=window.location.hash;hash_changed=1;}
function processHash(hash){hash=hash.replace('#!/','');rd_ajax(hash,1);}
function insert(a,b){element=document.getElementById('editor-area');if(document.selection){element.focus();sel=document.selection.createRange();sel.text=a+sel.text+b}else if(element.selectionStart||element.selectionStart=='0'){element.focus();var c=element.selectionStart;var d=element.selectionEnd;element.value=element.value.substring(0,c)+a+element.value.substring(c,d)+b+element.value.substring(d,element.value.length)}else{element.value+=a+b}}
function modify_links(){if(ajax_enabled){var modif_cnt=0;init_lightbox();$('.text a:not(.lightbox)').each(function(i){if($(this).children('img').length==1){var titles=($(this).children('p').html()==undefined)?'':'<str'+'ong>'+$(this).children('p').html()+'</str'+'ong>';var infos=($(this).attr('data-info')==undefined)?'':$(this).attr('data-info');var pic=$(this).attr('href');$(this).unbind().removeClass('news_link').addClass('lightbox thumbnail').attr('onClick',"show_lightbox(\""+titles+"\",\""+infos+"\",\""+pic+"\"); return false;").css('cursor','pointer');modif_cnt++;}});$('a.news_link').unbind();$('a.news_link').each(function(i){af=escape(this.href);$(this).attr('onClick',"rd_ajax('act=redir&to="+af+"',1,'get','ajax_temp'); return false;");modif_cnt+=1;});$('a.rdajax').unbind();$('a.rdajax').each(function(i){du=$(this).attr('data-url');dh=$(this).attr('data-hide');dc=$(this).attr('data-cont');dl=this.search.replace('?','');if(du==undefined){af=dl;}else{af=du;}
prms="";if(dh=='true'){prms=",0,'get','ajax_temp',true";}else if(dc!=undefined){prms=",1,'get','"+dc+"',false";}
$(this).attr('onClick',"rd_ajax('"+af+"'"+prms+"); return false;");modif_cnt+=1;du="";dl="";});$('*[data-title]').tipTip({maxWidth:"400px",edgeOffset:10,delay:0,fadeIn:200,fadeOut:100,removeContent:false,attribute:'data-title'});$('form[id!="login"]').unbind('submit').submit(function(event){event.preventDefault();log('[AJAX] Form submit request detected');if($(this).attr('method')){if($(this).attr('method').toLowerCase()=='post'){rd_ajax($(this).serialize(),1,'post',$(this).attr('data-cont'));}else{rd_ajax($(this).serialize(),1,'get',$(this).attr('data-cont'));}}else{rd_ajax($(this).serialize());}
return false;});$('#pager').unbind('submit').submit(function(event){event.preventDefault();log('[AJAX] Pager request detected');rd_ajax('act=news&part='+$('#pager-part').val()+$('#addit').val());});$('#sub-upload').unbind('submit').submit(function(event){event.preventDefault();show_loader();$.ajaxFileUpload({url:'index.php?ajax=1&'+$(this).serialize(),secureuri:false,fileElementId:'file',dataType:'text',success:function(data,status){hide_loader();Parse_Data(data,'content');},error:function(data,status,e){alert(e,'error');hide_loader();}});});$('.spoiler').children('.spoiler-title').unbind('click').click(function(){$(this).parent().children('.spoiler-inner').slideToggle('fast');});log('[AJAX]: AJAXification completed. AJAX-links: '+modif_cnt);}}
function login_button(){$('#user_menu').html("").slideUp('fast');$('#login').slideDown('fast');}
function login_req(form){log('Login form submit');$.post('index.php',$(form).serialize(),function(){},'script');$('#login').hide();$('#login_loader').show();}
function html_codes_init(){$('#editor-tags').tagsInput({width:'auto',height:'65px',autocomplete_url:'index.php?act=complete&ajax=2',autocomplete:{selectFirst:true,width:'100px',autoFill:true}});$('#editor-codes img').click(function(){var a=attribs=$(this).attr("alt");a=a.replace(/\[.*\]/,'');if(/\[.*\]/.test(attribs)){attribs=attribs.replace(/.*\[(.*)\]/,' $1')}else attribs='';var b='';if(a=='a'){var c=prompt("Введите ссылку","http://");if(c==null){return false;}
attribs='href="'+c+'"';b=' '}
if(a=='img'){var c=prompt("Введите ссылку на картинку","http://");if(c==null){return false;}
attribs='src="'+c+'"';b=' '}
if(a=='video'){a="div";var c=prompt("Введите ссылку на видео","http://");if(c==null){return false;}
attribs='data-src="'+c+'"';b=" class='rdvideo' ";}
if(a=='spoiler'){a="spoiler";var c=prompt("Введите заголовок для спойлера или оставьте поле пустым","");if(c==null||c==''){c='';}else{c='='+c;}
attribs='';b=c;}
if(a=='code'){a='code';}
var d='<'+a+b+attribs+'>';if((a=='hr')||(a=='img')){var e='';}else{var e='</'+a+'>';}
insert(d,e);return false});}
function get_tags(title){var a,b,c;a=title.split(' ');for(b in a){if(a[b].length<4){a.splice(b,1);}}
c=a.toString();if($('#editor-tags').val()==""){$('#editor-tags').val(c);$('#editor-tags').importTags(c);}
return c;}
var inits_count=0;function init(){modify_links();html_codes_init();VK.Auth.getLoginStatus(vk_auth_info);if(inits_count==0){}
inits_count++;};function set_user_info(id,name,nick,photo){if(nick!=''){show_as=nick;}else{show_as=name;}
$('#user_menu').html("<div class='center'><img src='"+photo+"' class='img-polaroid userpic'><p><a href='?act=users&profile="+id+"' class='rdajax' data-title='Открыть страницу профиля'>"+show_as+"</a></p><a href='?act=users&mode=edit&id="+id+"' class='rdajax btn btn-mini btn-block' data-title='Редактировать профиль'><i class='icon-pencil'></i> Редактировать</a><a class='btn btn-mini btn-block' href='javascript:' onClick='doLogout(); return false;' data-title='Выход'><i class='icon-remove'></i> Выйти</a></p></div>").slideDown('fast');$('#login').slideUp('fast');$('#login_loader').hide();modify_links();}
function vk_auth_info(response){if(response.session){log('[VK Auth] SID: '+response.session.sid);auth_state(true);}else{log('[VK Auth] SID: N/A');auth_state(false);}}
function auth_state(state){log('Checking User Info');if(((admin)||(user)||(moder))&&(state)){set_user_info(userid,username,usernick,userphoto);login_form(0);}else{log('[auth_state] Requesting User Info');$.getScript('index.php?act=auth&ajax=2',function(data){if((admin)||(user)||(moder)){if(!admin){$("#admin_menu").slideUp('fast');}
if(!moder){$("#mod_menu").slideUp('fast');}
set_user_info(userid,username,usernick,userphoto);login_form(0);}else{login_button();}});}}
function doLogin(){log('[doLogin] Login request');VK.Auth.login(function(response){log('[doLogin] Login response:',response);auth_state(true);},null);}
function doLogout(){log('[doLogout] Logout request');$.get('/modules/cookie.php?reset=1','',function(data){admin=false;user=false;auth_state(false);VK.Auth.logout();$("#admin_menu").slideUp('fast');$("#mod_menu").slideUp('fast');$("#profile_popup").slideUp('fast');alert('Выход произведен!','noerror');});}
function alert(text,error,timeout){timeout=timeout||20;alert_id+=1;type='';if(error!=null){if(error=='noerror'){type=' alert-success';}else if(error=='debug'){type=' alert-info';}else{type=' alert-error';}}
$('#alerts_container').append("<di"+"v id='popup_msg_"+alert_id+"' class='popup-msg alert"+type+"' onClick='$(this).slideUp(\"fast\");' data-rdtime='"+timeout+"'>"+text+"</di"+"v>");$('#popup_msg_'+alert_id).slideDown('fast');}
function special_notify(text){$('html, body').animate({scrollTop:0},300);$('#vk_msg').html(text);$("#vk_frame_bg").fadeIn('fast');return true;}
function log(text){if(debug){console.log(text);text=text.replace(/\r\n/g,'<br/>');alert('[Console]<br>'+text,'debug');}}
function recache(cacher){show_loader();$('html, body').animate({scrollTop:0},300);$.ajax({type:'get',url:cacher,dataType:'html',timeout:60000,cache:false,data:'',success:function(data){special_notify("Результат кеширования файлов: <pre>"+data+"</pre><a href='/'>Обновить страницу</a>");hide_loader();},error:function(objAJAXRequest,strError){special_notify("<di"+"v class='alert alert-error'>Произошла ошибка при получении данных!</"+"div><b"+"r><sm"+"all>Описание ошибки: "+strError+".</sm"+"all>");hide_loader();}});}
function center_elements(){$('#login_form_container').css('top',($(window).height()/2)-($('#login_form_container').height()/2)).css('left',($(window).width()/2)-($('#login_form_container').width()/2));$('#vk_frame_inner').css('top',($(window).height()/2)-($('#vk_frame_inner').height()/2)).css('left',($(window).width()/2)-($('#vk_frame_inner').width()/2));}
function toggle_adm(id){$("#form"+id).slideToggle("slow");$("#admin"+id).toggleClass("editor_show");}
function insert_reply(el){var toins='<b>'+el+'</b>, ';var ctx=$('#coms_editor').val();$('#coms_editor').val(toins+ctx);}
$(document).ready(function(){var disable_rd=disable_rd||false;if(!disable_rd){VK.init({apiId:js_vk_api_id,nameTransportPath:"/include/xd_reciever.html"});checkHash();var ch_int=setInterval("checkHash()",100);first_nav();center_elements();setInterval(function(){for(i=0;i<=alert_id;i++){attr=$('#popup_msg_'+i).attr('data-rdtime');if(attr>0){$('#popup_msg_'+i).attr('data-rdtime',attr-1);}else{$('#popup_msg_'+i).slideUp('fast');}}},500);}
$('.navbar-hider').click(function(){$('.navbar-menu').toggleClass('navbar-hidden');});});$(window).resize(function(){center_elements();center_lightbox();});$(window).scroll(function(){if($('html').offset().top<-130){$('body').addClass('scroll');}else{$('body').removeClass('scroll');}});$(document).ready(function(){$('#profile_button').addClass("ajaxloader");});
(function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"1.8.20",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})})(jQuery);;(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}})(jQuery);;(function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var h=a(b.of),i=h[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0],l,m,n;return i.nodeType===9?(l=h.width(),m=h.height(),n={top:0,left:0}):i.setTimeout?(l=h.width(),m=h.height(),n={top:h.scrollTop(),left:h.scrollLeft()}):i.preventDefault?(b.at="left top",l=m=0,n={top:b.of.pageY,left:b.of.pageX}):(l=h.outerWidth(),m=h.outerHeight(),n=h.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),j.length===1&&(j[1]=j[0]),k[0]=parseInt(k[0],10)||0,k.length===1&&(k[1]=k[0]),k[1]=parseInt(k[1],10)||0,b.at[0]==="right"?n.left+=l:b.at[0]===e&&(n.left+=l/2),b.at[1]==="bottom"?n.top+=m:b.at[1]===e&&(n.top+=m/2),n.left+=k[0],n.top+=k[1],this.each(function(){var c=a(this),d=c.outerWidth(),g=c.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,o=d+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=g+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0),q=a.extend({},n),r;b.my[0]==="right"?q.left-=d:b.my[0]===e&&(q.left-=d/2),b.my[1]==="bottom"?q.top-=g:b.my[1]===e&&(q.top-=g/2),f.fractions||(q.left=Math.round(q.left),q.top=Math.round(q.top)),r={left:q.left-h,top:q.top-i},a.each(["left","top"],function(c,e){a.ui.position[j[c]]&&a.ui.position[j[c]][e](q,{targetWidth:l,targetHeight:m,elemWidth:d,elemHeight:g,collisionPosition:r,collisionWidth:o,collisionHeight:p,offset:k,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(q,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===e)return;var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0},top:function(b,c){if(c.at[1]===e)return;var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?this.each(function(){a.offset.setOffset(this,b)}):h.call(this)}),function(){var b=document.getElementsByTagName("body")[0],c=document.createElement("div"),d,e,g,h,i;d=document.createElement(b?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},b&&a.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in g)d.style[j]=g[j];d.appendChild(c),e=b||document.documentElement,e.insertBefore(d,e.firstChild),c.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(c).offset(function(a,b){return b}).offset(),d.innerHTML="",e.removeChild(d),i=h.top+h.left+(b?2e3:0),f.fractions=i>21&&i<22}()})(jQuery);;(function(a,b){var c=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,c=this.element[0].ownerDocument,d;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(b.options.disabled||b.element.propAttr("readOnly"))return;d=!1;var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:b._move("previousPage",c);break;case e.PAGE_DOWN:b._move("nextPage",c);break;case e.UP:b._keyEvent("previous",c);break;case e.DOWN:b._keyEvent("next",c);break;case e.ENTER:case e.NUMPAD_ENTER:b.menu.active&&(d=!0,c.preventDefault());case e.TAB:if(!b.menu.active)return;b.menu.select(c);break;case e.ESCAPE:b.element.val(b.term),b.close(c);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){b.term!=b.element.val()&&(b.selectedItem=null,b.search(null,c))},b.options.delay)}}).bind("keypress.autocomplete",function(a){d&&(d=!1,a.preventDefault())}).bind("focus.autocomplete",function(){if(b.options.disabled)return;b.selectedItem=null,b.previous=b.element.val()}).bind("blur.autocomplete",function(a){if(b.options.disabled)return;clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150)}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(c){var d=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==d&&!a.ui.contains(d,c.target)&&b.close()})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){var d=c.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&b.element.val(d.value)},selected:function(a,d){var e=d.item.data("item.autocomplete"),f=b.previous;b.element[0]!==c.activeElement&&(b.element.focus(),b.previous=f,setTimeout(function(){b.previous=f,b.selectedItem=e},1)),!1!==b._trigger("select",a,{item:e})&&b.element.val(e.value),b.term=b.element.val(),b.close(a),b.selectedItem=e},blur:function(a,c){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),b.beforeunloadHandler=function(){b.element.removeAttr("autocomplete")},a(window).bind("beforeunload",b.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b==="source"&&this._initSource(),b==="appendTo"&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),b==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b=this,c,d;a.isArray(this.options.source)?(c=this.options.source,this.source=function(b,d){d(a.ui.autocomplete.filter(c,b.term))}):typeof this.options.source=="string"?(d=this.options.source,this.source=function(c,e){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:d,data:c,dataType:"json",success:function(a,b){e(a)},error:function(){e([])}})}):this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val(),this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)===!1)return;return this._search(a)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return typeof b=="string"?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term),this.menu.deactivate();return}this.menu[a](b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})})(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length)return;c.preventDefault(),b.select(c)}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();c<0?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active){this.activate(c,this.element.children(b));return}var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last()){this.activate(b,this.element.children(".ui-menu-item:first"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first()){this.activate(b,this.element.children(".ui-menu-item:last"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:first")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery);;
(function(a){var b=new Array;var c=new Array;a.fn.doAutosize=function(b){var c=a(this).data("minwidth"),d=a(this).data("maxwidth"),e="",f=a(this),g=a("#"+a(this).data("tester_id"));if(e===(e=f.val())){return}var h=e.replace(/&/g,"&").replace(/\s/g," ").replace(/</g,"<").replace(/>/g,">");g.html(h);var i=g.width(),j=i+b.comfortZone>=c?i+b.comfortZone:c,k=f.width(),l=j<k&&j>=c||j>c&&j<d;if(l){f.width(j)}};a.fn.resetAutosize=function(b){var c=a(this).data("minwidth")||b.minInputWidth||a(this).width(),d=a(this).data("maxwidth")||b.maxInputWidth||a(this).closest(".tagsinput").width()-b.inputPadding,e="",f=a(this),g=a("<tester/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:f.css("fontSize"),fontFamily:f.css("fontFamily"),fontWeight:f.css("fontWeight"),letterSpacing:f.css("letterSpacing"),whiteSpace:"nowrap"}),h=a(this).attr("id")+"_autosize_tester";if(!a("#"+h).length>0){g.attr("id",h);g.appendTo("body")}f.data("minwidth",c);f.data("maxwidth",d);f.data("tester_id",h);f.css("width",c)};a.fn.addTag=function(d,e){e=jQuery.extend({focus:false,callback:true},e);this.each(function(){var f=a(this).attr("id");var g=a(this).val().split(b[f]);if(g[0]==""){g=new Array}d=jQuery.trim(d);if(e.unique){var h=a(g).tagExist(d);if(h==true){a("#"+f+"_tag").addClass("not_valid")}}else{var h=false}if(d!=""&&h!=true){a("<span>").addClass("tag").append(a("<span>").text(d).append("  "),a("<a>",{href:"#",title:"Удалить тег",text:"x"}).click(function(){return a("#"+f).removeTag(escape(d))})).insertBefore("#"+f+"_addTag");g.push(d);a("#"+f+"_tag").val("");if(e.focus){a("#"+f+"_tag").focus()}else{a("#"+f+"_tag").blur()}a.fn.tagsInput.updateTagsField(this,g);if(e.callback&&c[f]&&c[f]["onAddTag"]){var i=c[f]["onAddTag"];i.call(this,d)}if(c[f]&&c[f]["onChange"]){var j=g.length;var i=c[f]["onChange"];i.call(this,a(this),g[j-1])}}});return false};a.fn.removeTag=function(d){d=unescape(d);this.each(function(){var e=a(this).attr("id");var f=a(this).val().split(b[e]);a("#"+e+"_tagsinput .tag").remove();str="";for(i=0;i<f.length;i++){if(f[i]!=d){str=str+b[e]+f[i]}}a.fn.tagsInput.importTags(this,str);if(c[e]&&c[e]["onRemoveTag"]){var g=c[e]["onRemoveTag"];g.call(this,d)}});return false};a.fn.tagExist=function(b){return jQuery.inArray(b,a(this))>=0};a.fn.importTags=function(b){id=a(this).attr("id");a("#"+id+"_tagsinput .tag").remove();a.fn.tagsInput.importTags(this,b)};a.fn.tagsInput=function(d){var e=jQuery.extend({interactive:true,defaultText:"добавить",minChars:0,width:"300px",height:"100px",autocomplete:{selectFirst:false},hide:true,delimiter:",",unique:true,removeWithBackspace:true,placeholderColor:"#666666",autosize:true,comfortZone:20,inputPadding:6*2},d);this.each(function(){if(e.hide){a(this).hide()}var d=a(this).attr("id");if(!d||b[a(this).attr("id")]){d=a(this).attr("id","tags"+(new Date).getTime()).attr("id")}var f=jQuery.extend({pid:d,real_input:"#"+d,holder:"#"+d+"_tagsinput",input_wrapper:"#"+d+"_addTag",fake_input:"#"+d+"_tag"},e);b[d]=f.delimiter;if(e.onAddTag||e.onRemoveTag||e.onChange){c[d]=new Array;c[d]["onAddTag"]=e.onAddTag;c[d]["onRemoveTag"]=e.onRemoveTag;c[d]["onChange"]=e.onChange}var g='<div id="'+d+'_tagsinput" class="tagsinput"><div id="'+d+'_addTag">';if(e.interactive){g=g+'<input id="'+d+'_tag" value="" data-default="'+e.defaultText+'" />'}g=g+'</div><div class="tags_clear"></div></div>';a(g).insertAfter(this);a(f.holder).css("width",e.width);a(f.holder).css("height",e.height);if(a(f.real_input).val()!=""){a.fn.tagsInput.importTags(a(f.real_input),a(f.real_input).val())}if(e.interactive){a(f.fake_input).val(a(f.fake_input).attr("data-default"));a(f.fake_input).css("color",e.placeholderColor);a(f.fake_input).resetAutosize(e);a(f.holder).bind("click",f,function(b){a(b.data.fake_input).focus()});a(f.fake_input).bind("focus",f,function(b){if(a(b.data.fake_input).val()==a(b.data.fake_input).attr("data-default")){a(b.data.fake_input).val("")}a(b.data.fake_input).css("color","#000000")});if(e.autocomplete_url!=undefined){autocomplete_options={source:e.autocomplete_url};for(attrname in e.autocomplete){autocomplete_options[attrname]=e.autocomplete[attrname]}if(jQuery.Autocompleter!==undefined){a(f.fake_input).autocomplete(e.autocomplete_url,e.autocomplete);a(f.fake_input).bind("result",f,function(b,c,f){if(c){a("#"+d).addTag(c[0]+"",{focus:true,unique:e.unique})}})}else if(jQuery.ui.autocomplete!==undefined){a(f.fake_input).autocomplete(autocomplete_options);a(f.fake_input).bind("autocompleteselect",f,function(b,c){a(b.data.real_input).addTag(c.item.value,{focus:true,unique:e.unique});return false})}}else{a(f.fake_input).bind("blur",f,function(b){var c=a(this).attr("data-default");if(a(b.data.fake_input).val()!=""&&a(b.data.fake_input).val()!=c){if(b.data.minChars<=a(b.data.fake_input).val().length&&(!b.data.maxChars||b.data.maxChars>=a(b.data.fake_input).val().length))a(b.data.real_input).addTag(a(b.data.fake_input).val(),{focus:true,unique:e.unique})}else{a(b.data.fake_input).val(a(b.data.fake_input).attr("data-default"));a(b.data.fake_input).css("color",e.placeholderColor)}return false})}a(f.fake_input).bind("keypress",f,function(b){if(b.which==b.data.delimiter.charCodeAt(0)||b.which==13){b.preventDefault();if(b.data.minChars<=a(b.data.fake_input).val().length&&(!b.data.maxChars||b.data.maxChars>=a(b.data.fake_input).val().length))a(b.data.real_input).addTag(a(b.data.fake_input).val(),{focus:true,unique:e.unique});a(b.data.fake_input).resetAutosize(e);return false}else if(b.data.autosize){a(b.data.fake_input).doAutosize(e)}});f.removeWithBackspace&&a(f.fake_input).bind("keydown",function(b){if(b.keyCode==8&&a(this).val()==""){b.preventDefault();var c=a(this).closest(".tagsinput").find(".tag:last").text();var d=a(this).attr("id").replace(/_tag$/,"");c=c.replace(/[\s]+x$/,"");a("#"+d).removeTag(escape(c));a(this).trigger("focus")}});a(f.fake_input).blur();if(f.unique){a(f.fake_input).keydown(function(b){if(b.keyCode==8||String.fromCharCode(b.which).match(/\w+|[áéíóúÁÉÍÓÚñÑ,/]+/)){a(this).removeClass("not_valid")}})}}});return this};a.fn.tagsInput.updateTagsField=function(c,d){var e=a(c).attr("id");a(c).val(d.join(b[e]))};a.fn.tagsInput.importTags=function(d,e){a(d).val("");var f=a(d).attr("id");var g=e.split(b[f]);for(i=0;i<g.length;i++){a(d).addTag(g[i],{focus:false,callback:false})}if(c[f]&&c[f]["onChange"]){var h=c[f]["onChange"];h.call(d,d,g[i])}}})(jQuery);
(function($){$.fn.tipTip=function(options){var defaults={activation:"hover",keepAlive:false,maxWidth:"200px",edgeOffset:3,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:false,enter:function(){},exit:function(){},removeContent:true};var opts=$.extend(defaults,options);if($("#tiptip_holder").length<=0){var tiptip_holder=$('<div id="tiptip_holder" style="max-width:'+opts.maxWidth+';"></div>');var tiptip_content=$('<div id="tiptip_content"></div>');var tiptip_arrow=$('<div id="tiptip_arrow"></div>');$("body").append(tiptip_holder.html(tiptip_content).prepend(tiptip_arrow.html('<div id="tiptip_arrow_inner"></div>')));}else{var tiptip_holder=$("#tiptip_holder");var tiptip_content=$("#tiptip_content");var tiptip_arrow=$("#tiptip_arrow");}
return this.each(function(){var org_elem=$(this);if(opts.content){var org_title=opts.content;}else{var org_title=org_elem.attr(opts.attribute);}
if(org_title!=""){if((!opts.content)&&(opts.removeContent)){org_elem.removeAttr(opts.attribute);}
var timeout=false;var rdinterv=false;if(opts.activation=="hover"){org_elem.hover(function(){active_tiptip();rdinterv=setTimeout(function(){deactive_tiptip();},3000);},function(){if(!opts.keepAlive){deactive_tiptip();clearTimeout(rdinterv);}});if(opts.keepAlive){tiptip_holder.hover(function(){},function(){deactive_tiptip();});}}else if(opts.activation=="focus"){org_elem.focus(function(){active_tiptip();}).blur(function(){deactive_tiptip();});}else if(opts.activation=="click"){org_elem.click(function(){active_tiptip();return false;}).hover(function(){},function(){if(!opts.keepAlive){deactive_tiptip();}});if(opts.keepAlive){tiptip_holder.hover(function(){},function(){deactive_tiptip();});}}
function active_tiptip(){opts.enter.call(this);tiptip_content.html(org_title);tiptip_holder.hide().removeAttr("class").css("margin","0");tiptip_arrow.removeAttr("style");var top=parseInt(org_elem.offset()['top']);var left=parseInt(org_elem.offset()['left']);var org_width=parseInt(org_elem.outerWidth());var org_height=parseInt(org_elem.outerHeight());var tip_w=tiptip_holder.outerWidth();var tip_h=tiptip_holder.outerHeight();var w_compare=Math.round((org_width-tip_w)/2);var h_compare=Math.round((org_height-tip_h)/2);var marg_left=Math.round(left+w_compare);var marg_top=Math.round(top+org_height+opts.edgeOffset);var t_class="";var arrow_top="";var arrow_left=Math.round(tip_w-12)/2;if(opts.defaultPosition=="bottom"){t_class="_bottom";}else if(opts.defaultPosition=="top"){t_class="_top";}else if(opts.defaultPosition=="left"){t_class="_left";}else if(opts.defaultPosition=="right"){t_class="_right";}
var right_compare=(w_compare+left)<parseInt($(window).scrollLeft());var left_compare=(tip_w+left)>parseInt($(window).width());if((right_compare&&w_compare<0)||(t_class=="_right"&&!left_compare)||(t_class=="_left"&&left<(tip_w+opts.edgeOffset+5))){t_class="_right";arrow_top=Math.round(tip_h-13)/2;arrow_left=-12;marg_left=Math.round(left+org_width+opts.edgeOffset);marg_top=Math.round(top+h_compare);}else if((left_compare&&w_compare<0)||(t_class=="_left"&&!right_compare)){t_class="_left";arrow_top=Math.round(tip_h-13)/2;arrow_left=Math.round(tip_w);marg_left=Math.round(left-(tip_w+opts.edgeOffset+5));marg_top=Math.round(top+h_compare);}
var top_compare=(top+org_height+opts.edgeOffset+tip_h+8)>parseInt($(window).height()+$(window).scrollTop());var bottom_compare=((top+org_height)-(opts.edgeOffset+tip_h+8))<0;if(top_compare||(t_class=="_bottom"&&top_compare)||(t_class=="_top"&&!bottom_compare)){if(t_class=="_top"||t_class=="_bottom"){t_class="_top";}else{t_class=t_class+"_top";}
arrow_top=tip_h;marg_top=Math.round(top-(tip_h+5+opts.edgeOffset));}else if(bottom_compare|(t_class=="_top"&&bottom_compare)||(t_class=="_bottom"&&!top_compare)){if(t_class=="_top"||t_class=="_bottom"){t_class="_bottom";}else{t_class=t_class+"_bottom";}
arrow_top=-12;marg_top=Math.round(top+org_height+opts.edgeOffset);}
if(t_class=="_right_top"||t_class=="_left_top"){marg_top=marg_top+5;}else if(t_class=="_right_bottom"||t_class=="_left_bottom"){marg_top=marg_top-5;}
if(t_class=="_left_top"||t_class=="_left_bottom"){marg_left=marg_left+5;}
tiptip_arrow.css({"margin-left":arrow_left+"px","margin-top":arrow_top+"px"});tiptip_holder.css({"margin-left":marg_left+"px","margin-top":marg_top+"px"}).attr("class","tip"+t_class);if(timeout){clearTimeout(timeout);}
timeout=setTimeout(function(){tiptip_holder.stop(true,true).fadeIn(opts.fadeIn);},opts.delay);}
function deactive_tiptip(){opts.exit.call(this);if(timeout){clearTimeout(timeout);}
tiptip_holder.fadeOut(opts.fadeOut);}}});}})(jQuery);
(function(a,b){var c=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var b=this,c=this.element[0].ownerDocument,d;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(b.options.disabled||b.element.propAttr("readOnly"))return;d=!1;var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:b._move("previousPage",c);break;case e.PAGE_DOWN:b._move("nextPage",c);break;case e.UP:b._keyEvent("previous",c);break;case e.DOWN:b._keyEvent("next",c);break;case e.ENTER:case e.NUMPAD_ENTER:b.menu.active&&(d=!0,c.preventDefault());case e.TAB:if(!b.menu.active)return;b.menu.select(c);break;case e.ESCAPE:b.element.val(b.term),b.close(c);break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){b.term!=b.element.val()&&(b.selectedItem=null,b.search(null,c))},b.options.delay)}}).bind("keypress.autocomplete",function(a){d&&(d=!1,a.preventDefault())}).bind("focus.autocomplete",function(){if(b.options.disabled)return;b.selectedItem=null,b.previous=b.element.val()}).bind("blur.autocomplete",function(a){if(b.options.disabled)return;clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150)}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(c){var d=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==d&&!a.ui.contains(d,c.target)&&b.close()})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){var d=c.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&b.element.val(d.value)},selected:function(a,d){var e=d.item.data("item.autocomplete"),f=b.previous;b.element[0]!==c.activeElement&&(b.element.focus(),b.previous=f,setTimeout(function(){b.previous=f,b.selectedItem=e},1)),!1!==b._trigger("select",a,{item:e})&&b.element.val(e.value),b.term=b.element.val(),b.close(a),b.selectedItem=e},blur:function(a,c){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),b.beforeunloadHandler=function(){b.element.removeAttr("autocomplete")},a(window).bind("beforeunload",b.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),b==="source"&&this._initSource(),b==="appendTo"&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),b==="disabled"&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var b=this,c,d;a.isArray(this.options.source)?(c=this.options.source,this.source=function(b,d){d(a.ui.autocomplete.filter(c,b.term))}):typeof this.options.source=="string"?(d=this.options.source,this.source=function(c,e){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:d,data:c,dataType:"json",success:function(a,b){e(a)},error:function(){e([])}})}):this.source=this.options.source},search:function(a,b){a=a!=null?a:this.element.val(),this.term=this.element.val();if(a.length<this.options.minLength)return this.close(b);clearTimeout(this.closing);if(this._trigger("search",b)===!1)return;return this._search(a)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return typeof b=="string"?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){if(!this.menu.element.is(":visible")){this.search(null,b);return}if(this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)){this.element.val(this.term),this.menu.deactivate();return}this.menu[a](b)},widget:function(){return this.menu.element},_keyEvent:function(a,b){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})})(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("dropdown-menu").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(!a(c.target).closest(".ui-menu-item a").length)return;c.preventDefault(),b.select(c)}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){this.deactivate();if(this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();c<0?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active){this.activate(c,this.element.children(b));return}var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last()){this.activate(b,this.element.children(".ui-menu-item:first"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first()){this.activate(b,this.element.children(".ui-menu-item:last"));return}var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(".ui-menu-item:first")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery);
(function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;return!b.href||!g||f.nodeName.toLowerCase()!=="map"?!1:(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h))}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(a.ui.version)return;a.extend(a.ui,{version:"1.8.20",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return typeof b!="number"?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!d||!a.element[0].parentNode)return;for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}})})(jQuery);
(function(a,b){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var h=a(b.of),i=h[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0],l,m,n;return i.nodeType===9?(l=h.width(),m=h.height(),n={top:0,left:0}):i.setTimeout?(l=h.width(),m=h.height(),n={top:h.scrollTop(),left:h.scrollLeft()}):i.preventDefault?(b.at="left top",l=m=0,n={top:b.of.pageY,left:b.of.pageX}):(l=h.outerWidth(),m=h.outerHeight(),n=h.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");a.length===1&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),j.length===1&&(j[1]=j[0]),k[0]=parseInt(k[0],10)||0,k.length===1&&(k[1]=k[0]),k[1]=parseInt(k[1],10)||0,b.at[0]==="right"?n.left+=l:b.at[0]===e&&(n.left+=l/2),b.at[1]==="bottom"?n.top+=m:b.at[1]===e&&(n.top+=m/2),n.left+=k[0],n.top+=k[1],this.each(function(){var c=a(this),d=c.outerWidth(),g=c.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,o=d+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=g+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0),q=a.extend({},n),r;b.my[0]==="right"?q.left-=d:b.my[0]===e&&(q.left-=d/2),b.my[1]==="bottom"?q.top-=g:b.my[1]===e&&(q.top-=g/2),f.fractions||(q.left=Math.round(q.left),q.top=Math.round(q.top)),r={left:q.left-h,top:q.top-i},a.each(["left","top"],function(c,e){a.ui.position[j[c]]&&a.ui.position[j[c]][e](q,{targetWidth:l,targetHeight:m,elemWidth:d,elemHeight:g,collisionPosition:r,collisionWidth:o,collisionHeight:p,offset:k,my:b.my,at:b.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(q,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]===e)return;var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,h=c.at[0]==="left"?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0},top:function(b,c){if(c.at[1]===e)return;var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,h=c.at[1]==="top"?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return!c||!c.ownerDocument?null:b?this.each(function(){a.offset.setOffset(this,b)}):h.call(this)}),function(){var b=document.getElementsByTagName("body")[0],c=document.createElement("div"),d,e,g,h,i;d=document.createElement(b?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},b&&a.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in g)d.style[j]=g[j];d.appendChild(c),e=b||document.documentElement,e.insertBefore(d,e.firstChild),c.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(c).offset(function(a,b){return b}).offset(),d.innerHTML="",e.removeChild(d),i=h.top+h.left+(b?2e3:0),f.fractions=i>21&&i<22}()})(jQuery);
(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&e.charAt(0)==="_"?h:(f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b)return h=f,!1}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}})(jQuery);
/*
Cached on: Sat, 23 Mar 2013 13:50:27 +0400, timestamp: 1364032227
*/